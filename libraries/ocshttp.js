"use strict";
;
function createXML(session, event, localParams) {
    var x;
    try {
        session.s_xml1 = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><sms><user><username>SendSMSwhileOff</username><password>Aa87!6179</password></user><source>019</source><destinations><phone>";
        session.s_xml2 = "</phone></destinations><message>test</message><response>0</response></sms>";
        session.s_xml = session.s_xml1 + session.s_normalizedNumber + session.s_xml2;
        return "success";
    }
    catch (e) {
        return "exception." + e;
    }
}
function checkHttpResponse(session, event, localParams) {
    var log = session.log;
    log.debug("Event received:{}", event);
    var bodyStr = event.body;
    session.restResponse = 0;
    session.callstate = "HTTPRESPONSE_INIT";
    session.CalledPartyOverwritten = "sip:+4390123123@test.com";
    try {
        if (session.s_SIPInvite.SIP.From.address.uri.user.endsWith("0")) {
            return "scenario.0";
        }
        else if (session.s_SIPInvite.SIP.From.address.uri.user.endsWith("4")) {
            return "scenario.4";
        }
        else if (session.s_SIPInvite.SIP.From.address.uri.user.endsWith("5")) {
            return "scenario.5";
        }
        else {
            return "scenario.undefined";
        }
        var body = event.body;
        session.restResponse = body.status;
        if (session.restResponse == "0") {
            session.callstate = "HTTPRESPONSE_CONNECT";
            if (body.paramX.match(session.Callingipv4)) {
                session.CalledPartyOverwritten = "sip:+4390123123@test.com";
                session.loginfo = session.loginfo + "ParamX.match.OverwriteDestination. connect to " + session.CalledPartyOverwritten + ";";
            }
            else if (body.paramY.match(session.Callingipv4)) {
                session.CalledPartyOverwritten = "sip:+4390123123@test.com";
                session.loginfo = session.loginfo + "ParamY.match.OverwriteDestination. connect to " + session.CalledPartyOverwritten + ";";
            }
            else {
                session.CalledPartyOverwritten = session.CalledParty;
                session.loginfo = session.loginfo + "Param.do not match.Connect to Initial CalledParty;";
            }
        }
        else if (session.restResponse == "4") {
            session.callstate = "HTTPRESPONSE_MRFPC";
        }
        else if (session.restResponse == "5") {
            session.callstate = "HTTPRESPONSE_MRFBYE";
        }
        else {
            session.callstate = "HTTPRESPONSE_UNKNOWN" + session.callstate;
        }
    }
    catch (e) {
        log.error("checkHttpResponse Exception {}", e);
        session.callstate = "HTTPRESPONSE_EXCEPTION";
        session.restResponse = "exception." + e;
    }
    ;
    var callstateold = session.callstate;
    log.error("Call_{}:State_{}->{}+", session["trace-skey"], callstateold, session.callstate);
    session.loginfo = session.loginfo + session.callstate + ";";
    return "scenario." + session.restResponse;
}
function failureHttpResponse(session, event, localParams) {
    var eventname = event["event-name"];
    if (event["event-name"].startsWith("sip")) {
        session.loginfo = session.loginfo + "SIP-event received while waiting for Http response (" + eventname + ");";
        return "sip.callended";
    }
    else if (event["event-name"].startsWith("http")) {
        session.loginfo = session.loginfo + "HttpFailure response received (" + event.body.status + ");";
    }
    else {
        session.loginfo = session.loginfo + "No SIP or HTTP event received while waiting for Http response (" + eventname + ");";
    }
    return "success";
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxDQUFDO0FBRUQsU0FBUyxTQUFTLENBQUMsT0FBYSxFQUFFLEtBQVcsRUFBRSxXQUFnQjtJQUU1RCxJQUFJLENBQVUsQ0FBQztJQUNmLElBQUc7UUFDRixPQUFPLENBQUMsTUFBTSxHQUFHLHlLQUF5SyxDQUFDO1FBQzNMLE9BQU8sQ0FBQyxNQUFNLEdBQUcsNEVBQTRFLENBQUM7UUFDOUYsT0FBTyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQzdFLE9BQU8sU0FBUyxDQUFDO0tBQ2pCO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDWCxPQUFPLFlBQVksR0FBRyxDQUFDLENBQUM7S0FDeEI7QUFFSixDQUFDO0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxPQUFhLEVBQUUsS0FBVyxFQUFFLFdBQWdCO0lBQ25FLElBQUksR0FBRyxHQUFTLE9BQU8sQ0FBQyxHQUFHLENBQUM7SUFDNUIsR0FBRyxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBQyxLQUFLLENBQUMsQ0FBQztJQUNyQyxJQUFJLE9BQU8sR0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ3ZCLE9BQU8sQ0FBQyxZQUFZLEdBQUUsQ0FBQyxDQUFDO0lBQ3hCLE9BQU8sQ0FBQyxTQUFTLEdBQUcsbUJBQW1CLENBQUM7SUFDeEMsT0FBTyxDQUFDLHNCQUFzQixHQUFDLDBCQUEwQixDQUFBO0lBQ3pELElBQUk7UUFPQSxJQUFLLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUc7WUFDL0QsT0FBTyxZQUFZLENBQUM7U0FDdkI7YUFBTSxJQUFLLE9BQU8sQ0FBQyxX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QyxFQUFFO1FBQ3ZDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sR0FBQyxzREFBc0QsR0FBQyxTQUFTLEdBQUMsSUFBSSxDQUFDO1FBRXhHLE9BQU8sZUFBZSxDQUFBO0tBQ3pCO1NBQU0sSUFBSSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQy9DLE9BQU8sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sR0FBQyxpQ0FBaUMsR0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxJQUFJLENBQUM7S0FDOUY7U0FBTTtRQUNILE9BQU8sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sR0FBQyxpRUFBaUUsR0FBQyxTQUFTLEdBQUMsSUFBSSxDQUFDO0tBQ3RIO0lBRUQsT0FBTyxTQUFTLENBQUM7QUFDckIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vTUFJTkJMT0NLXG47XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVYTUwoc2Vzc2lvbiA6IGFueSwgZXZlbnQgOiBhbnksIGxvY2FsUGFyYW1zOiBhbnkgKXtcclxuXHJcbiAgIGxldCB4IDogc3RyaW5nO1xyXG4gICB0cnl7XHJcbiAgICBzZXNzaW9uLnNfeG1sMSA9IFwiPD94bWwgdmVyc2lvbj1cXFwiMS4wXFxcIiBlbmNvZGluZz1cXFwiVVRGLThcXFwiPz48c21zPjx1c2VyPjx1c2VybmFtZT5TZW5kU01Td2hpbGVPZmY8L3VzZXJuYW1lPjxwYXNzd29yZD5BYTg3ITYxNzk8L3Bhc3N3b3JkPjwvdXNlcj48c291cmNlPjAxOTwvc291cmNlPjxkZXN0aW5hdGlvbnM+PHBob25lPlwiO1xyXG4gICAgc2Vzc2lvbi5zX3htbDIgPSBcIjwvcGhvbmU+PC9kZXN0aW5hdGlvbnM+PG1lc3NhZ2U+dGVzdDwvbWVzc2FnZT48cmVzcG9uc2U+MDwvcmVzcG9uc2U+PC9zbXM+XCI7XHJcbiAgICBzZXNzaW9uLnNfeG1sID0gc2Vzc2lvbi5zX3htbDEgKyBzZXNzaW9uLnNfbm9ybWFsaXplZE51bWJlciArIHNlc3Npb24uc194bWwyO1xyXG4gICAgcmV0dXJuIFwic3VjY2Vzc1wiO1xyXG4gICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4gXCJleGNlcHRpb24uXCIgKyBlO1xyXG4gICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0h0dHBSZXNwb25zZShzZXNzaW9uIDogYW55LCBldmVudCA6IGFueSwgbG9jYWxQYXJhbXM6IGFueSApe1xyXG4gICAgbGV0IGxvZyA6IGFueSA9IHNlc3Npb24ubG9nO1xyXG4gICAgbG9nLmRlYnVnKFwiRXZlbnQgcmVjZWl2ZWQ6e31cIixldmVudCk7XHJcbiAgICBsZXQgYm9keVN0cj1ldmVudC5ib2R5O1xyXG4gICAgc2Vzc2lvbi5yZXN0UmVzcG9uc2UgPTA7XHJcbiAgICBzZXNzaW9uLmNhbGxzdGF0ZSAgPVwiSFRUUFJFU1BPTlNFX0lOSVRcIjtcclxuICAgIHNlc3Npb24uQ2FsbGVkUGFydHlPdmVyd3JpdHRlbj1cInNpcDorNDM5MDEyMzEyM0B0ZXN0LmNvbVwiXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vbGV0IGJvZHkgPSBKU09OLnBhcnNlKGJvZHlTdHIpO1xyXG5cclxuICAgICAgICAvL2ZvciB0aGUgcG9jIG9ubHlcclxuICAgICAgICAvL2lmIFJVUkkgZW5kcyB3aXRoIDQgLT4gc2NlbmFyaW80XHJcbiAgICAgICAgLy9pZiBSVVJJIGVuZHMgd2l0aCA1IC0+IHNjZW5hcmlvNVxyXG4gICAgICAgIC8vaWYgUlVSSSBlbmRzIHdpdGggMCAtPiBzY2VuYXJpbzBcclxuICAgICAgICBpZiAoIHNlc3Npb24uc19TSVBJbnZpdGUuU0lQLkZyb20uYWRkcmVzcy51cmkudXNlci5lbmRzV2l0aChcIjBcIikgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcInNjZW5hcmlvLjBcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKCBzZXNzaW9uLnNfU0lQSW52aXRlLlNJUC5Gcm9tLmFkZHJlc3MudXJpLnVzZXIuZW5kc1dpdGgoXCI0XCIpICkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJzY2VuYXJpby40XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICggc2Vzc2lvbi5zX1NJUEludml0ZS5TSVAuRnJvbS5hZGRyZXNzLnVyaS51c2VyLmVuZHNXaXRoKFwiNVwiKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwic2NlbmFyaW8uNVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcInNjZW5hcmlvLnVuZGVmaW5lZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgbGV0IGJvZHkgPSBldmVudC5ib2R5O1xyXG4gICAgICAgIHNlc3Npb24ucmVzdFJlc3BvbnNlID0gYm9keS5zdGF0dXM7XHJcbiAgICAgICAgaWYgKHNlc3Npb24ucmVzdFJlc3BvbnNlPT1cIjBcIikge1xyXG4gICAgICAgICAgICBzZXNzaW9uLmNhbGxzdGF0ZSAgPVwiSFRUUFJFU1BPTlNFX0NPTk5FQ1RcIjsgICBcclxuICAgICAgICAgICAgaWYgKGJvZHkucGFyYW1YLm1hdGNoKHNlc3Npb24uQ2FsbGluZ2lwdjQpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uLkNhbGxlZFBhcnR5T3ZlcndyaXR0ZW49XCJzaXA6KzQzOTAxMjMxMjNAdGVzdC5jb21cIlxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dpbmZvID0gc2Vzc2lvbi5sb2dpbmZvK1wiUGFyYW1YLm1hdGNoLk92ZXJ3cml0ZURlc3RpbmF0aW9uLiBjb25uZWN0IHRvIFwiK3Nlc3Npb24uQ2FsbGVkUGFydHlPdmVyd3JpdHRlbitcIjtcIjsgXHJcbiAgICAgICAgICAgIH0gIGVsc2UgaWYgKGJvZHkucGFyYW1ZLm1hdGNoKHNlc3Npb24uQ2FsbGluZ2lwdjQpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uLkNhbGxlZFBhcnR5T3ZlcndyaXR0ZW49XCJzaXA6KzQzOTAxMjMxMjNAdGVzdC5jb21cIlxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dpbmZvID0gc2Vzc2lvbi5sb2dpbmZvK1wiUGFyYW1ZLm1hdGNoLk92ZXJ3cml0ZURlc3RpbmF0aW9uLiBjb25uZWN0IHRvIFwiK3Nlc3Npb24uQ2FsbGVkUGFydHlPdmVyd3JpdHRlbitcIjtcIjsgXHJcbiAgICAgICAgICAgIH0gIGVsc2UgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNlc3Npb24uQ2FsbGVkUGFydHlPdmVyd3JpdHRlbj1zZXNzaW9uLkNhbGxlZFBhcnR5O1xyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dpbmZvID0gc2Vzc2lvbi5sb2dpbmZvK1wiUGFyYW0uZG8gbm90IG1hdGNoLkNvbm5lY3QgdG8gSW5pdGlhbCBDYWxsZWRQYXJ0eTtcIjsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb24ucmVzdFJlc3BvbnNlPT1cIjRcIikge1xyXG4gICAgICAgICAgICBzZXNzaW9uLmNhbGxzdGF0ZSA9XCJIVFRQUkVTUE9OU0VfTVJGUENcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb24ucmVzdFJlc3BvbnNlPT1cIjVcIikge1xyXG4gICAgICAgICAgICBzZXNzaW9uLmNhbGxzdGF0ZSA9XCJIVFRQUkVTUE9OU0VfTVJGQllFXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2Vzc2lvbi5jYWxsc3RhdGUgPVwiSFRUUFJFU1BPTlNFX1VOS05PV05cIitzZXNzaW9uLmNhbGxzdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nLmVycm9yKFwiY2hlY2tIdHRwUmVzcG9uc2UgRXhjZXB0aW9uIHt9XCIsZSk7XHJcbiAgICAgICAgc2Vzc2lvbi5jYWxsc3RhdGUgID1cIkhUVFBSRVNQT05TRV9FWENFUFRJT05cIjtcclxuICAgICAgICBzZXNzaW9uLnJlc3RSZXNwb25zZSA9IFwiZXhjZXB0aW9uLlwiICtlO1xyXG4gICAgfTtcclxuXHJcbiAgICBcclxuICAgIGxldCBjYWxsc3RhdGVvbGQgOnN0cmluZyA9IHNlc3Npb24uY2FsbHN0YXRlOyAgICBcclxuICAgIGxvZy5lcnJvcihcIkNhbGxfe306U3RhdGVfe30tPnt9K1wiLHNlc3Npb25bXCJ0cmFjZS1za2V5XCJdLGNhbGxzdGF0ZW9sZCxzZXNzaW9uLmNhbGxzdGF0ZSk7ICAgXHJcbiAgICBzZXNzaW9uLmxvZ2luZm8gPSBzZXNzaW9uLmxvZ2luZm8rc2Vzc2lvbi5jYWxsc3RhdGUrXCI7XCI7IFxyXG5cclxuICAgIC8vc2Vzc2lvbi5DYWxsZWRQYXJ0eU92ZXJ3cml0dGVuPVtcInNpcDorNDA5MDEyMzEyM0B0ZXN0LmNvbVwiLFwic2lwOis0MDkwMTIzMTI0QHRlc3QuY29tXCJdO1xyXG5cclxuICAgIHJldHVybiBcInNjZW5hcmlvLlwiK3Nlc3Npb24ucmVzdFJlc3BvbnNlO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZmFpbHVyZUh0dHBSZXNwb25zZShzZXNzaW9uIDogYW55LCBldmVudCA6IGFueSwgbG9jYWxQYXJhbXM6IGFueSApeyAgICAgXHJcbiAgICBsZXQgZXZlbnRuYW1lOiBzdHJpbmc9ICAgZXZlbnRbXCJldmVudC1uYW1lXCJdO1xyXG4gICAgaWYgKGV2ZW50W1wiZXZlbnQtbmFtZVwiXS5zdGFydHNXaXRoKFwic2lwXCIpKSB7XHJcbiAgICAgICAgc2Vzc2lvbi5sb2dpbmZvID0gc2Vzc2lvbi5sb2dpbmZvK1wiU0lQLWV2ZW50IHJlY2VpdmVkIHdoaWxlIHdhaXRpbmcgZm9yIEh0dHAgcmVzcG9uc2UgKFwiK2V2ZW50bmFtZStcIik7XCI7IFxyXG4gICAgICAgIC8vYnlwYXNzIHRoZSBURVJJTUFURSBjYWxsIGhhbmRsZXIgYXMgdGhlIGNhbGwgaXMgYWxyZWFkeSB0ZXJtaW5hdGVkXHJcbiAgICAgICAgcmV0dXJuIFwic2lwLmNhbGxlbmRlZFwiXHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50W1wiZXZlbnQtbmFtZVwiXS5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xyXG4gICAgICAgIHNlc3Npb24ubG9naW5mbyA9IHNlc3Npb24ubG9naW5mbytcIkh0dHBGYWlsdXJlIHJlc3BvbnNlIHJlY2VpdmVkIChcIitldmVudC5ib2R5LnN0YXR1cytcIik7XCI7IFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZXNzaW9uLmxvZ2luZm8gPSBzZXNzaW9uLmxvZ2luZm8rXCJObyBTSVAgb3IgSFRUUCBldmVudCByZWNlaXZlZCB3aGlsZSB3YWl0aW5nIGZvciBIdHRwIHJlc3BvbnNlIChcIitldmVudG5hbWUrXCIpO1wiOyBcclxuICAgIH1cclxuICAgIC8vcmV0dXJuIGV2ZW50LmJvZHkuc3RhdHVzO1xyXG4gICAgcmV0dXJuIFwic3VjY2Vzc1wiO1xyXG59XHJcbiJdfQ==