"use strict";
var Capabilities;
(function (Capabilities) {
    Capabilities["REL1XX"] = "REL1XX";
    Capabilities["FORKING"] = "FORKING";
    Capabilities["PRECONDITION"] = "PRECONDITION";
    Capabilities["PEM"] = "PEM";
    Capabilities["UPDATE"] = "UPDATE";
})(Capabilities || (Capabilities = {}));
var Annotype;
(function (Annotype) {
    Annotype["CONNECT"] = "CONNECT";
    Annotype["RINGING"] = "RING";
})(Annotype || (Annotype = {}));
var CallPollActionType;
(function (CallPollActionType) {
    CallPollActionType["Accept"] = "accept";
    CallPollActionType["Forward"] = "forward";
    CallPollActionType["Reject"] = "reject";
})(CallPollActionType || (CallPollActionType = {}));
var CallStartActionType;
(function (CallStartActionType) {
    CallStartActionType[CallStartActionType["Abort"] = 0] = "Abort";
    CallStartActionType[CallStartActionType["Forward"] = 1] = "Forward";
    CallStartActionType[CallStartActionType["RejectMrf"] = 2] = "RejectMrf";
})(CallStartActionType || (CallStartActionType = {}));
var MediaOperationActionType;
(function (MediaOperationActionType) {
    MediaOperationActionType["PerformMediaOperation"] = "performMediaOperation";
})(MediaOperationActionType || (MediaOperationActionType = {}));
var MediaOperationContentType;
(function (MediaOperationContentType) {
    MediaOperationContentType["MSML"] = "application/msml+xml";
})(MediaOperationContentType || (MediaOperationContentType = {}));
;
function formatDate(date) {
    var ret = date.getFullYear().toString() + ("00" + (date.getMonth() + 1).toString()).slice(-2) + ("00" + (date.getDate()).toString()).slice(-2);
    return ret;
}
function formatTime(date) {
    var ret = ("00" + date.getHours().toString()).slice(-2) + ("00" + date.getMinutes().toString()).slice(-2) + ("00" + date.getSeconds().toString()).slice(-2);
    return ret;
}
function sleepfunction(date) {
    java.lang.Thread.sleep(999);
    return "success";
}
;
;
function armevents(sessionData, eventData, localParams) {
    var ret;
    var log = sessionData.log;
    try {
        if (eventData["event-name"] = "sip.callAnswered.SipCallLegUaClient") {
            sessionData.callstate = "ANSWERED";
            sessionData.timeanswer = Math.floor(new Date() / 1000);
            log.debug("armevents: Call Answered");
        }
    }
    catch (e) {
        log.debug("armevents: Call Answered Log: {}", e);
    }
    var status2;
    var events;
    events = events || {};
    events.InfoPollEvent = "null";
    events.SuccessResponsePollEvent = "null";
    events.RawContentPollEvent = "test/test";
    var headerVars;
    headerVars = headerVars || {};
    headerVars.disableSendDefaultReason = "Disabled";
    headerVars.disableSendNoAnswerReason = "Disabled";
    headerVars.privateServiceMode = "b2bua";
    var ringingTones;
    ringingTones = ringingTones || [];
    var comf;
    comf = comf || {};
    comf.anno_name = "comfort";
    comf.anno_type = Annotype.CONNECT;
    var ring;
    ring = ring || {};
    ring.anno_name = "ringing";
    ring.anno_type = Annotype.RINGING;
    ringingTones.push(comf, ring);
    var capabilities = sessionData.inCapabilities;
    if (capabilities != null) {
        capabilities.push(Capabilities.PEM);
        capabilities.push(Capabilities.FORKING);
        sessionData.outCapabilities = JSON.stringify(capabilities);
    }
    sessionData.events = JSON.stringify(events);
    sessionData.headerrulevar = JSON.stringify(headerVars);
    sessionData.headerrulesselect = "SipServiceSpecificRulesSet";
    sessionData.ringingtones = JSON.stringify(ringingTones);
    sessionData.upstreamCapabilities = JSON.stringify([]);
    return "success";
}
function armeventsNetworkRingtone(session, event, localParams) {
    var log = session.log;
    var events;
    events = events || {};
    events.InfoPollEvent = "null";
    events.SuccessResponsePollEvent = "null";
    events.RawContentPollEvent = "test/test";
    var headerVars;
    headerVars = headerVars || {};
    headerVars.disableSendDefaultReason = "Disabled";
    headerVars.disableSendNoAnswerReason = "Disabled";
    headerVars.privateServiceMode = "b2bua";
    var ringingTones;
    ringingTones = ringingTones || [];
    var comf;
    comf = comf || {};
    comf.anno_name = "comfort";
    comf.anno_type = Annotype.CONNECT;
    var ring;
    ring = ring || {};
    ring.anno_name = "ringing";
    ring.anno_type = Annotype.RINGING;
    ringingTones.push(comf, ring);
    var capabilities = session.inCapabilities;
    if (capabilities != null) {
        capabilities.push(Capabilities.PEM);
        capabilities.push(Capabilities.FORKING);
        session.outCapabilities = JSON.stringify(capabilities);
    }
    session.events = JSON.stringify(events);
    session.headerrulevar = JSON.stringify(headerVars);
    session.headerrulesselect = "SipServiceSpecificRulesSet";
    session.ringingtones = JSON.stringify(ringingTones);
    session.upstreamCapabilities = JSON.stringify([]);
    return "success";
}
function prepareCallPollAccept(session, event, localParams) {
    var log = session.log;
    try {
        var pollAction = void 0;
        pollAction = pollAction || {};
        pollAction.type = CallPollActionType.Accept;
        session.sendAction = JSON.stringify(pollAction);
        return "success";
    }
    catch (e) {
        log.debug("prepareCallPollAccept Log: {}", e);
        return "error.exception";
    }
}
function callended(session, eventData, localParams) {
    var ret = "success";
    var log = session.log;
    var callstateold = session.callstate;
    session.callstate = "CLOSED";
    session.timeend = Math.floor(new Date() / 1000);
    try {
        if (session.timeanswer != null) {
            session.duration = session.timeend - session.timeanswer;
        }
        else {
            session.duration = "not-started";
        }
    }
    catch (e) {
        session.duration = "exception";
    }
    log.error("Call_{}:State_{}->{}+", session["trace-skey"], callstateold, session.callstate);
    session.loginfo = session.loginfo + session.callstate + ";duration=" + session.duration + ";";
    var logline = {};
    try {
        logline.MSISDN = session["s_normalizedNumber"];
        logline.ServiceSessionId = session["fsm-id"];
        logline.MsgType = "SIP.INVITE";
        logline.MsgSessionId = session["fsm-id"];
        logline.MsgId = session["s_initialSIP"]["SIP"]["Call-ID"]["value"];
        logline.MsgDetails = "";
        logline.Servicedetails = "";
        logline.callAnswered = session.timeanswer;
        logline.callEnded = session.timeend;
        logline.callDuration = session.duration;
        session.loginfo = "";
        logline.GwEventTime = session.timeanswer;
        var now = new Date();
        var logDate = formatDate(now);
        var logTime = formatTime(now);
        logline.LogLineTime = logDate + "." + logTime + "." + ("000" + now.getMilliseconds().toString()).slice(-3);
    }
    catch (e) {
        logline.MSISDN = "";
        logline.ServiceSessionId = "";
        logline.MsgType = "";
        logline.MsgSessionId = "";
        logline.MsgId = "";
        logline.MsgDetails = "";
        logline.Servicedetails = "error at CCRContinue logline";
        logline.callAnswered = "na";
        logline.callEnded = "na";
        logline.callDuration = "na";
        logline.LogLineTime = "";
    }
    ;
    logline.TraceLevel = session["fsm-trace-level"];
    session.logline = logline;
    return ret;
}
function getdisconnectreason(session, event, any, localParams) {
    var log = session.log;
    try {
        session.callstate = "CLOSED";
        session.timeend = Math.floor(new Date() / 1000);
        try {
            if (session.timeanswer != null) {
                session.duration = session.timeend - session.timeanswer;
            }
            else {
                session.duration = "not-started";
            }
        }
        catch (e) {
            session.duration = "exception";
        }
        var logline = {};
        try {
            logline["MSISDN"] = session["s_normalizedNumber"];
            logline["ServiceSessionId"] = session["fsm-id"];
            logline["MsgType"] = "SIP.INVITE";
            logline["MsgSessionId"] = session["fsm-id"];
            logline["MsgId"] = session["s_initialSIP"]["SIP"]["Call-ID"]["value"];
            logline["MsgDetails"] = "to be filled";
            logline["Servicedetails"] = "to be filled";
            logline["callAnswered"] = session.timeanswer;
            logline["callEnded"] = session.timeend;
            logline["callDuration"] = session.duration;
            var now = new Date();
            var logDate = formatDate(now);
            var logTime = formatTime(now);
            logline["LogLineTime"] = logDate + "." + logTime + "." + ("000" + now.getMilliseconds().toString()).slice(-3);
        }
        catch (e) {
            logline["MSISDN"] = "";
            logline["ServiceSessionId"] = "";
            logline["MsgType"] = "";
            logline["MsgSessionId"] = "";
            logline["MsgId"] = "";
            logline["MsgDetails"] = "";
            logline["Servicedetails"] = "exception" + e;
            logline["callAnswered"] = "na";
            logline["callEnded"] = "na";
            logline["callDuration"] = "na";
            logline["LogLineTime"] = "na";
        }
        ;
        session.logline = logline;
        var events = event["events-stack"].length;
        var index = events - 1;
        if (event["events-stack"][index] === "leg.timeout") {
            return "reason.timeout";
        }
        else if (event["events-stack"][index] === "leg.max_call_duration") {
            return "reason.max_call_duration";
        }
        else {
            return "reason." + event["events-stack"][index];
        }
    }
    catch (e) {
        log.debug("getdisconnectreason Log: {}", e);
        return "reason.exception";
    }
}
function setPreconditionForwadCallb2b(session, event, localParams) {
    var ret;
    ret = ret || {};
    ret.resultCode = "success";
    var events;
    events = events || {};
    events.SIPPollEvent = "null";
    events.SIP18xInformatoinalEvent = "null";
    events.SdpAnswerEvent = "null";
    events.SIPReINVITEEvent = "null";
    events.SDPOfferPollEvent = "null";
    events.SipRingingPollEvent = "null";
    events.SipSdpOfferPollEvent = "null";
    events.SIPegClosedEvent = "null";
    events.CallBeingForwardedPollEvent = "null";
    events.SIPSdpAnswerPollEvent = "null";
    events.RingingPollEvent = "null";
    events.SIP18xAnswerEvent = "null";
    events.SIPRingingPollEvent = "null";
    events.InfoPollEvent = "null";
    events.SuccessResponsePollEvent = "null";
    events.RawContentPollEvent = "test/test";
    session.events = JSON.stringify(events);
    var headerVars;
    headerVars = headerVars || {};
    headerVars.disableSendDefaultReason = "Disabled";
    headerVars.disableSendNoAnswerReason = "Disabled";
    session.headerrulevar = JSON.stringify(headerVars);
    session.headerrulesselect = "SipServiceSpecificRulesSet";
    return ret;
}
function checkSDPAnswerAction(session, event, localParams) {
    var eventData = localParams.message;
    var pollAction;
    pollAction = pollAction || {};
    pollAction.type = CallPollActionType.Reject;
    session.sendAction = JSON.stringify(pollAction);
    return true;
}
function modifydisposition(session, event, localParams) {
    var initialMsg = localParams.message;
    if (initialMsg["SIP"]["capabilities"] != null) {
        if (initialMsg["SIP"]["capabilities"].indexOf(Capabilities.FORKING) > -1) {
            var capabilities = [];
            session.upstreamCapabilities = JSON.stringify(capabilities);
        }
    }
    if (initialMsg["SIP"]["R-URI"]["value"] == "sip:972000019@172.31.11.142:5062") {
        session.destlist = ["sip:9900004@172.31.11.142:5062", "sip:9900099@172.31.11.142:5062"];
    }
    return true;
}
function setdestinationlist(session, event, localParams) {
    var initialMsg = localParams.message;
    if (initialMsg["SIP"]["R-URI"]["value"] == "sip:972000019@172.31.11.142:5062") {
        session.destlist = ["sip:9900011@172.31.11.142:5062", "sip:9900022@172.31.11.142:5064", "sip:9900033@172.31.11.142:5065"];
    }
    return true;
}
function addheader(session, event, localParams) {
    var addHeaders = [];
    var removeHeaders = [];
    var hi = {};
    hi.header = "History-Info";
    hi.value = "sip:+11004366087962011@172.20.208.99;user=phone";
    var addHistoryInfo = [];
    addHistoryInfo.push(hi);
    addHeaders.push(addHistoryInfo[0]);
    var niceheader = {};
    niceheader.header = "MyNewHeader";
    niceheader.value = "whateveryoulike";
    addHeaders.push(niceheader);
    session.addHeaders = JSON.stringify(addHeaders);
    removeHeaders.push("Subject");
    session.removeHeaders = JSON.stringify(removeHeaders);
    session.headerrulesselect = "SipServiceSpecificRulesSet";
    return "success";
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFXQSxJQUFLLFlBTUo7QUFORCxXQUFLLFlBQVk7SUFDZixpQ0FBaUIsQ0FBQTtJQUNqQixtQ0FBa0IsQ0FBQTtJQUNsQiw2Q0FBMkIsQ0FBQTtJQUMzQiwyQkFBUyxDQUFBO0lBQ1QsaUNBQWUsQ0FBQTtBQUNqQixDQUFDLEVBTkksWUFBWSxLQUFaLFlBQVksUUFNaEI7QUFzREQsSUFBSyxRQUdKO0FBSEQsV0FBSyxRQUFRO0lBQ1gsK0JBQW1CLENBQUE7SUFDbkIsNEJBQWdCLENBQUE7QUFDbEIsQ0FBQyxFQUhJLFFBQVEsS0FBUixRQUFRLFFBR1o7QUF1QkQsSUFBSyxrQkFJSjtBQUpELFdBQUssa0JBQWtCO0lBQ3RCLHVDQUFpQixDQUFBO0lBQ2pCLHlDQUFtQixDQUFBO0lBQ25CLHVDQUFpQixDQUFBO0FBQ2xCLENBQUMsRUFKSSxrQkFBa0IsS0FBbEIsa0JBQWtCLFFBSXRCO0FBRUQsSUFBSyxtQkFJSjtBQUpELFdBQUssbUJBQW1CO0lBQ3ZCLCtEQUFTLENBQUE7SUFDVCxtRUFBVyxDQUFBO0lBQ1gsdUVBQWEsQ0FBQTtBQUNkLENBQUMsRUFKSSxtQkFBbUIsS0FBbkIsbUJBQW1CLFFBSXZCO0FBZ0NELElBQUssd0JBRUo7QUFGRCxXQUFLLHdCQUF3QjtJQUM1QiwyRUFBK0MsQ0FBQTtBQUNoRCxDQUFDLEVBRkksd0JBQXdCLEtBQXhCLHdCQUF3QixRQUU1QjtBQUVELElBQUsseUJBRUo7QUFGRCxXQUFLLHlCQUF5QjtJQUM3QiwwREFBNkIsQ0FBQTtBQUM5QixDQUFDLEVBRkkseUJBQXlCLEtBQXpCLHlCQUF5QixRQUU3QjtBQW1GRCxDQUFDO0FBR0QsU0FBUyxVQUFVLENBQUMsSUFBVztJQUMzQixJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxJQUFJLEdB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QyIsInNvdXJjZXNDb250ZW50IjpbIlxuLy9pbnRlcmZhY2UgZGVmaW5pdGlvblxyXG5cclxuaW50ZXJmYWNlIExlZyB7XHJcbiAgYWRkcmVzcyA6IHN0cmluZztcclxuICBuYW1lIDogc3RyaW5nXHJcbn1cclxuaW50ZXJmYWNlIENhbGwge1xyXG4gIHN0YXRlIDogbnVtYmVyXHJcbn1cclxuXHJcbmVudW0gQ2FwYWJpbGl0aWVzIHtcclxuICBSRUwxWFggPSBcIlJFTDFYWFwiLFxyXG4gIEZPUktJTkc9IFwiRk9SS0lOR1wiLFxyXG4gIFBSRUNPTkRJVElPTj1cIlBSRUNPTkRJVElPTlwiLFxyXG4gIFBFTT1cIlBFTVwiLFxyXG4gIFVQREFURT1cIlVQREFURVwiXHJcbn1cclxuXHJcbmludGVyZmFjZSBNZXNzYWdlIHtcclxuICBtZXRob2QgOiBbc3RyaW5nXTtcclxuICB0eXBlIDogW3N0cmluZ107XHJcbiAgYm9keSA6IFtzdHJpbmddXHJcbn1cclxuXHJcbmludGVyZmFjZSBTSVAge1xyXG4gIGNhcGFiaWxpdGllcyA6IFtDYXBhYmlsaXRpZXNdO1xyXG4gIG1lc3NhZ2UgOiBNZXNzYWdlXHJcbn1cclxuXHJcbmludGVyZmFjZSBDYWxsU3RhcnQge1xyXG4gIGNvbnRhY3QgOiBzdHJpbmc7XHJcbiAgY2F1c2U6IHN0cmluZztcclxuICBsZWcgOiBzdHJpbmdcclxufVxyXG5cclxuaW50ZXJmYWNlIENhbGxQb2xsIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdHlwZTogc3RyaW5nO1xyXG4gIGxlZzogc3RyaW5nXHJcbn1cclxuXHJcbmludGVyZmFjZSBFdmVudCB7XHJcbiAgbmFtZSA6IHN0cmluZztcclxuICBjYWxsU3RhcnQ/IDogQ2FsbFN0YXJ0O1xyXG4gIGNhbGxQb2xsPyA6IENhbGxQb2xsXHJcbn1cclxuXHJcblxyXG5pbnRlcmZhY2UgT0NDUEV2ZW50IHtcclxuICBjYWxsaWQgOiBzdHJpbmc7XHJcbiAgY2FsbCA6IENhbGw7XHJcbiAgYXMgOiBzdHJpbmc7XHJcbiAgZXZlbnR0aW1lIDogbnVtYmVyO1xyXG4gIFNJUCA6IFNJUDtcclxuICBldmVudDogRXZlbnRcclxufVxyXG5cclxuaW50ZXJmYWNlIEV2ZW50cyB7XHJcbiAgU3VjY2Vzc1Jlc3BvbnNlUG9sbEV2ZW50PyA6IHN0cmluZztcclxuICBSYXdDb250ZW50UG9sbEV2ZW50PyA6IHN0cmluZztcclxuICBJbmZvUG9sbEV2ZW50Pzogc3RyaW5nXHJcbn1cclxuLyoqXHJcbiAgRGVmaW5lIGhlYWRlciB2YXJpYWJsZXMgdXNlZCBieSBhcHBsaWNhdGlvblxyXG4qL1xyXG5pbnRlcmZhY2UgSGVhZGVyVmFycyB7XHJcbiAgZGlzYWJsZVNlbmREZWZhdWx0UmVhc29uPyA6IHN0cmluZztcclxuICBkaXNhYmxlU2VuZE5vQW5zd2VyUmVhc29uPyA6IHN0cmluZ1xyXG59XHJcblxyXG5lbnVtIEFubm90eXBlIHtcclxuICBDT05ORUNUID0gXCJDT05ORUNUXCIsXHJcbiAgUklOR0lORyA9IFwiUklOR1wiXHJcbn1cclxuXHJcbmludGVyZmFjZSBSaW5naW5nVG9uZSB7XHJcbiAgYW5ub19uYW1lIDogc3RyaW5nO1xyXG4gIGFubm9fdHlwZSA6IEFubm90eXBlXHJcbn1cclxuXHJcbmludGVyZmFjZSBTZXNzaW9uIHtcclxuICBsb2cgOiBhbnk7XHJcbiAgaW5DYXBhYmlsaXRpZXMgOiBbQ2FwYWJpbGl0aWVzXTtcclxuICBvdXRDYXBhYmlsaXRpZXM/IDogc3RyaW5nO1xyXG4gIGV2ZW50cz8gOiBzdHJpbmc7XHJcbiAgaGVhZGVycnVsZXZhcj8gOiBzdHJpbmc7XHJcbiAgaGVhZGVycnVsZXNzZWxlY3Q/IDogc3RyaW5nO1xyXG4gIHJpbmdpbmd0b25lcz8gOiBzdHJpbmc7XHJcbiAgc2VuZEFjdGlvbj8gOiBzdHJpbmcgO1xyXG4gIFNJUEhlbHBlciA6IGFueTtcclxuICBTSVBJbml0aWFsSW52aXRlPyA6IGFueTtcclxuICBTSVBNZXNzYWdlPyA6IGFueTtcclxuICBTSVBNZXNzYWdlVHlwZT8gOiBhbnlcclxufVxyXG5cclxuXHJcbmVudW0gQ2FsbFBvbGxBY3Rpb25UeXBlIHtcclxuIEFjY2VwdCA9IFwiYWNjZXB0XCIsXHJcbiBGb3J3YXJkID0gXCJmb3J3YXJkXCIsXHJcbiBSZWplY3QgPSBcInJlamVjdFwiLFxyXG59XHJcblxyXG5lbnVtIENhbGxTdGFydEFjdGlvblR5cGUge1xyXG4gQWJvcnQgPSAwLFxyXG4gRm9yd2FyZCA9IDEsXHJcbiBSZWplY3RNcmYgPSAyXHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiBTZXQgYWN0aW9uIGZvciBDYWxsU3RhcnQgZXZlbnRcclxuKi9cclxuaW50ZXJmYWNlIENhbGxTdGFydEFjdGlvbiB7XHJcbiB0eXBlIDogQ2FsbFN0YXJ0QWN0aW9uVHlwZTtcclxuIGVycm9yY29kZSA6IG51bWJlcjtcclxuIGNhdXNlIDogc3RyaW5nIDtcclxuIHVyaSA6IHN0cmluZztcclxuIGVhcmx5bWVkaWEgOiBudW1iZXI7XHJcbiBsZWduYW1lIDogc3RyaW5nIFxyXG59XHJcblxyXG4vKipcclxuIFNldCBhY3Rpb24gZm9yIENhbGxQb2xsIGV2ZW50XHJcbiovXHJcbmludGVyZmFjZSBDYWxsUG9sbEFjdGlvbiB7XHJcbiB0eXBlIDogQ2FsbFBvbGxBY3Rpb25UeXBlXHJcbn1cclxuXHJcblxyXG4vKipcclxuIEFwcGxpY2F0aW9uIGNhbiBzZXQgYWN0aW9uIGZvciBhIHNwZWNpZmljIGxlZywgdGhpcyBpcyBhcHBsaWNhYmxlIGZvciBNUkYgY29udGFjdFxyXG4gKi9cclxuaW50ZXJmYWNlIExlZ0FjdGlvbiB7XHJcbiB0eXBlIDogQ2FsbFN0YXJ0QWN0aW9uVHlwZSA7XHJcbiBsZWdhY3Rpb24gOiBzdHJpbmdcclxufVxyXG5cclxuZW51bSBNZWRpYU9wZXJhdGlvbkFjdGlvblR5cGUge1xyXG4gUGVyZm9ybU1lZGlhT3BlcmF0aW9uID0gXCJwZXJmb3JtTWVkaWFPcGVyYXRpb25cIlxyXG59XHJcblxyXG5lbnVtIE1lZGlhT3BlcmF0aW9uQ29udGVudFR5cGUge1xyXG4gTVNNTCA9IFwiYXBwbGljYXRpb24vbXNtbCt4bWxcIlxyXG59XHJcblxyXG5pbnRlcmZhY2UgUGVyZm9ybU1lZGlhT3BlcmF0aW9uIHtcclxuIENvbnRlbnRUeXBlIDogTWVkaWFPcGVyYXRpb25Db250ZW50VHlwZTtcclxuIENvbnRlbnQgOiBzdHJpbmdcclxufVxyXG5cclxuaW50ZXJmYWNlIE1lZGlhT3BlcmF0aW9uQWN0aW9uIHtcclxuIHR5cGUgOiBudW1iZXI7XHJcbiBsZWdhY3Rpb24gOiBNZWRpYU9wZXJhdGlvbkFjdGlvblR5cGU7XHJcbiBwZXJmb3JtTWVkaWFPcGVyYXRpb24gOiBQZXJmb3JtTWVkaWFPcGVyYXRpb25cclxufVxyXG5cclxuaW50ZXJmYWNlIEFjdGlvbiB7XHJcbiBhY3Rpb24gOiBhbnkgXHJcbn1cclxuXHJcblxyXG5pbnRlcmZhY2UgSGVhZGVyIHtcclxuIGhlYWRlciA6IHN0cmluZztcclxuIHZhbHVlIDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUUhlYWRlciB7XHJcbiBQcml2YWN5IDogc3RyaW5nO1xyXG4gUmVhc29uIDogc3RyaW5nIDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFBhcmFtZXRlciB7XHJcbiB0cmFuc3BvcnQgOiBzdHJpbmc7XHJcbiB1c2VyIDogc3RyaW5nIDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFVSSSB7XHJcbiBzY2hlbWUgOiBzdHJpbmc7XHJcbiBhdXRob3JpdHkgOiBzdHJpbmcgO1xyXG4gZ3IgOiBzdHJpbmcgO1xyXG4gaG9zdDogc3RyaW5nIDtcclxuIGxyIDogc3RyaW5nIDtcclxuIG1hZGRyIDogc3RyaW5nIDtcclxuIHBvcnQgOiBudW1iZXIgIDtcclxuIHVzZXIgOiBzdHJpbmcgO1xyXG4gcGFyYW1ldGVycyA6IFtQYXJhbWV0ZXJdO1xyXG4gcWhlYWRlciA6IFtRSGVhZGVyXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFkZHJlc3Mge1xyXG4gZGlzcGxheU5hbWUgOiBzdHJpbmc7XHJcbiB1cmkgOiBVUkkgXHJcbn1cclxuXHJcbmludGVyZmFjZSBIaXN0b3J5SW5mbyBpbXBsZW1lbnRzIEhlYWRlciB7XHJcbiBhZGRyZXNzIDogQWRkcmVzcztcclxuIGluZGV4IDogc3RyaW5nXHJcbn1cclxuXHJcbmludGVyZmFjZSBQQUkgaW1wbGVtZW50cyBIZWFkZXIgIHtcclxuIGFkZHJlc3MgOiBBZGRyZXNzXHJcbn1cclxuXHJcbmludGVyZmFjZSBGcm9tIGltcGxlbWVudHMgSGVhZGVyIHtcclxuIGFkZHJlc3MgOiBBZGRyZXNzO1xyXG4gdGFnIDogc3RyaW5nIDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFRvIGltcGxlbWVudHMgSGVhZGVyIHtcclxuIGFkZHJlc3MgOiBBZGRyZXNzO1xyXG4gdGFnIDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUENWIGltcGxlbWVudHMgSGVhZGVyIHtcclxuIGljaWRfZ2VuZXJhdGVkX2F0OiBzdHJpbmcgO1xyXG4gaWNpZF92YWx1ZSA6IHN0cmluZyA7XHJcbiBvYWlkIDogc3RyaW5nO1xyXG4gdGFpZCA6IHN0cmluZztcclxuIG9zaWQgOiBzdHJpbmc7XHJcbiB0c2lkIDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmVzdWx0Q29kZSB7XHJcbiAgcmVzdWx0Q29kZSA6IHN0cmluZyA7XHJcbn1cclxuXG47XG4vKiogbGliIGNvZGUgKi9cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSA6IERhdGUpIDogc3RyaW5nIHtcclxuICAgIGxldCByZXQgOiBzdHJpbmcgID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAoXCIwMFwiICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpKS5zbGljZSgtMikgKyAoXCIwMFwiKyhkYXRlLmdldERhdGUoKSkudG9TdHJpbmcoKSkuc2xpY2UoLTIpO1xyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0VGltZShkYXRlIDogRGF0ZSkgOiBzdHJpbmcge1xyXG4gICAgbGV0IHJldCA6IHN0cmluZyAgPSAoXCIwMFwiK2RhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpKS5zbGljZSgtMikgKyAoXCIwMFwiK2RhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkpLnNsaWNlKC0yKSArIChcIjAwXCIrZGF0ZS5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKSkuc2xpY2UoLTIpO1xyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNsZWVwZnVuY3Rpb24oZGF0ZSA6IERhdGUpIDogc3RyaW5nIHtcclxuICAgIGphdmEubGFuZy5UaHJlYWQuc2xlZXAoOTk5KTtcclxuXHJcbiAgICByZXR1cm4gXCJzdWNjZXNzXCI7XHJcbn1cclxuXG47Ly9NQUlOQkxPQ0tcbjtcbmZ1bmN0aW9uIGFybWV2ZW50cyhzZXNzaW9uRGF0YTphbnksZXZlbnREYXRhOmFueSxsb2NhbFBhcmFtczphbnkpOiBhbnkge1xuICAgIGxldCByZXQ6IFJlc3VsdENvZGUgO1xuICAgIGxldCBsb2cgPSBzZXNzaW9uRGF0YS5sb2c7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoZXZlbnREYXRhW1wiZXZlbnQtbmFtZVwiXSA9IFwic2lwLmNhbGxBbnN3ZXJlZC5TaXBDYWxsTGVnVWFDbGllbnRcIikge1xuICAgICAgICAgICAgc2Vzc2lvbkRhdGEuY2FsbHN0YXRlICA9XCJBTlNXRVJFRFwiO1xuICAgICAgICAgICAgc2Vzc2lvbkRhdGEudGltZWFuc3dlcj0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLzEwMDApOyAgICAgXG4gICAgICAgICAgICBsb2cuZGVidWcoXCJhcm1ldmVudHM6IENhbGwgQW5zd2VyZWRcIik7ICBcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nLmRlYnVnKFwiYXJtZXZlbnRzOiBDYWxsIEFuc3dlcmVkIExvZzoge31cIiwgZSk7XG4gICAgfVxuXG4gICAgbGV0IHN0YXR1czIgOiBzdHJpbmc7XG4gICAgbGV0IGV2ZW50cyA6IEV2ZW50cztcbiAgICBldmVudHMgPSBldmVudHMgfHwge307XG4gICAgZXZlbnRzLkluZm9Qb2xsRXZlbnQ9XCJudWxsXCI7XG4gICAgZXZlbnRzLlN1Y2Nlc3NSZXNwb25zZVBvbGxFdmVudD1cIm51bGxcIjtcbiAgICBldmVudHMuUmF3Q29udGVudFBvbGxFdmVudD1cInRlc3QvdGVzdFwiO1xuXG4gICAgbGV0IGhlYWRlclZhcnMgOiBIZWFkZXJWYXJzO1xuICAgIGhlYWRlclZhcnMgPSBoZWFkZXJWYXJzIHx8IHt9O1xuICAgIGhlYWRlclZhcnMuZGlzYWJsZVNlbmREZWZhdWx0UmVhc29uID0gXCJEaXNhYmxlZFwiO1xuICAgIGhlYWRlclZhcnMuZGlzYWJsZVNlbmROb0Fuc3dlclJlYXNvbiA9IFwiRGlzYWJsZWRcIjtcbiAgICBoZWFkZXJWYXJzLnByaXZhdGVTZXJ2aWNlTW9kZSA9IFwiYjJidWFcIjtcblxuICAgIGxldCByaW5naW5nVG9uZXMgOiBbUmluZ2luZ1RvbmVdO1xuICAgIHJpbmdpbmdUb25lcyA9IHJpbmdpbmdUb25lcyB8fCBbXTtcbiAgICBsZXQgY29tZiA6IFJpbmdpbmdUb25lO1xuICAgIGNvbWYgPSBjb21mIHx8IHt9O1xuICAgIGNvbWYuYW5ub19uYW1lPVwiY29tZm9ydFwiO1xuICAgIGNvbWYuYW5ub190eXBlPUFubm90eXBlLkNPTk5FQ1Q7XG4gICAgbGV0IHJpbmcgOiBSaW5naW5nVG9uZTtcbiAgICByaW5nID0gcmluZyB8fCB7fTtcbiAgICByaW5nLmFubm9fbmFtZT1cInJpbmdpbmdcIjtcbiAgICByaW5nLmFubm9fdHlwZT1Bbm5vdHlwZS5SSU5HSU5HO1xuICAgIHJpbmdpbmdUb25lcy5wdXNoKGNvbWYsIHJpbmcpO1xuXG4gICAgbGV0IGNhcGFiaWxpdGllcyA9IHNlc3Npb25EYXRhLmluQ2FwYWJpbGl0aWVzO1xuICAgIGlmKCBjYXBhYmlsaXRpZXMhPW51bGwpe1xuICAgICAgICBjYXBhYmlsaXRpZXMucHVzaChDYXBhYmlsaXRpZXMuUEVNKTtcbiAgICAgICAgY2FwYWJpbGl0aWVzLnB1c2goQ2FwYWJpbGl0aWVzLkZPUktJTkcpO1xuICAgICAgICBzZXNzaW9uRGF0YS5vdXRDYXBhYmlsaXRpZXMgPSBKU09OLnN0cmluZ2lmeShjYXBhYmlsaXRpZXMpO1xuICAgIH1cblxuICAgIHNlc3Npb25EYXRhLmV2ZW50cyA9IEpTT04uc3RyaW5naWZ5KGV2ZW50cyk7XG4gICAgc2Vzc2lvbkRhdGEuaGVhZGVycnVsZXZhcj1KU09OLnN0cmluZ2lmeShoZWFkZXJWYXJzKTtcbiAgICBzZXNzaW9uRGF0YS5oZWFkZXJydWxlc3NlbGVjdCA9IFwiU2lwU2VydmljZVNwZWNpZmljUnVsZXNTZXRcIjtcbiAgICBzZXNzaW9uRGF0YS5yaW5naW5ndG9uZXMgPSBKU09OLnN0cmluZ2lmeShyaW5naW5nVG9uZXMpO1xuICAgIHNlc3Npb25EYXRhLnVwc3RyZWFtQ2FwYWJpbGl0aWVzPUpTT04uc3RyaW5naWZ5KFtdKTtcblxuICAgIHJldHVybiBcInN1Y2Nlc3NcIjtcbn1cblxuXG5cbmZ1bmN0aW9uIGFybWV2ZW50c05ldHdvcmtSaW5ndG9uZShzZXNzaW9uOmFueSxldmVudDphbnksbG9jYWxQYXJhbXM6YW55KTogYW55IHtcbiAgICBsZXQgbG9nID0gc2Vzc2lvbi5sb2c7XG5cbiAgICBsZXQgZXZlbnRzIDogRXZlbnRzO1xuICAgIGV2ZW50cyA9IGV2ZW50cyB8fCB7fTtcbiAgICBldmVudHMuSW5mb1BvbGxFdmVudD1cIm51bGxcIjtcbiAgICBldmVudHMuU3VjY2Vzc1Jlc3BvbnNlUG9sbEV2ZW50PVwibnVsbFwiO1xuICAgIGV2ZW50cy5SYXdDb250ZW50UG9sbEV2ZW50PVwidGVzdC90ZXN0XCI7XG5cbiAgICBsZXQgaGVhZGVyVmFycyA6IEhlYWRlclZhcnM7XG4gICAgaGVhZGVyVmFycyA9IGhlYWRlclZhcnMgfHwge307XG4gICAgaGVhZGVyVmFycy5kaXNhYmxlU2VuZERlZmF1bHRSZWFzb24gPSBcIkRpc2FibGVkXCI7XG4gICAgaGVhZGVyVmFycy5kaXNhYmxlU2VuZE5vQW5zd2VyUmVhc29uID0gXCJEaXNhYmxlZFwiO1xuICAgIGhlYWRlclZhcnMucHJpdmF0ZVNlcnZpY2VNb2RlID0gXCJiMmJ1YVwiO1xuXG4gICAgbGV0IHJpbmdpbmdUb25lcyA6IFtSaW5naW5nVG9uZV07XG4gICAgcmluZ2luZ1RvbmVzID0gcmluZ2luZ1RvbmVzIHx8IFtdO1xuICAgIGxldCBjb21mIDogUmluZ2luZ1RvbmU7XG4gICAgY29tZiA9IGNvbWYgfHwge307XG4gICAgY29tZi5hbm5vX25hbWU9XCJjb21mb3J0XCI7XG4gICAgY29tZi5hbm5vX3R5cGU9QW5ub3R5cGUuQ09OTkVDVDtcbiAgICBsZXQgcmluZyA6IFJpbmdpbmdUb25lO1xuICAgIHJpbmcgPSByaW5nIHx8IHt9O1xuICAgIHJpbmcuYW5ub19uYW1lPVwicmluZ2luZ1wiO1xuICAgIHJpbmcuYW5ub190eXBlPUFubm90eXBlLlJJTkdJTkc7XG4gICAgcmluZ2luZ1RvbmVzLnB1c2goY29tZiwgcmluZyk7XG5cbiAgICBsZXQgY2FwYWJpbGl0aWVzID0gc2Vzc2lvbi5pbkNhcGFiaWxpdGllcztcbiAgICBpZiggY2FwYWJpbGl0aWVzIT1udWxsKXtcbiAgICAgICAgY2FwYWJpbGl0aWVzLnB1c2goQ2FwYWJpbGl0aWVzLlBFTSk7XG4gICAgICAgIGNhcGFiaWxpdGllcy5wdXNoKENhcGFiaWxpdGllcy5GT1JLSU5HKTtcbiAgICAgICAgc2Vzc2lvbi5vdXRDYXBhYmlsaXRpZXMgPSBKU09OLnN0cmluZ2lmeShjYXBhYmlsaXRpZXMpO1xuICAgIH1cblxuICAgIHNlc3Npb24uZXZlbnRzID0gSlNPTi5zdHJpbmdpZnkoZXZlbnRzKTtcbiAgICBzZXNzaW9uLmhlYWRlcnJ1bGV2YXI9SlNPTi5zdHJpbmdpZnkoaGVhZGVyVmFycyk7XG4gICAgc2Vzc2lvbi5oZWFkZXJydWxlc3NlbGVjdCA9IFwiU2lwU2VydmljZVNwZWNpZmljUnVsZXNTZXRcIjtcbiAgICBzZXNzaW9uLnJpbmdpbmd0b25lcyA9IEpTT04uc3RyaW5naWZ5KHJpbmdpbmdUb25lcyk7XG4gICAgc2Vzc2lvbi51cHN0cmVhbUNhcGFiaWxpdGllcz1KU09OLnN0cmluZ2lmeShbXSk7XG5cbiAgICByZXR1cm4gXCJzdWNjZXNzXCI7XG59XG5cblxuZnVuY3Rpb24gcHJlcGFyZUNhbGxQb2xsQWNjZXB0KHNlc3Npb246YW55LGV2ZW50Ok9DQ1BTSVAuT0NDUEV2ZW50LGxvY2FsUGFyYW1zOmFueSkge1xuICAgIGxldCBsb2cgPSBzZXNzaW9uLmxvZztcblxuICAgIHRyeSB7XG4gICAgICAgIGxldCBwb2xsQWN0aW9uIDogQ2FsbFBvbGxBY3Rpb247XG4gICAgICAgIHBvbGxBY3Rpb24gPSBwb2xsQWN0aW9uIHx8IHt9O1xuICAgICAgICBwb2xsQWN0aW9uLnR5cGUgPSBDYWxsUG9sbEFjdGlvblR5cGUuQWNjZXB0O1xuICAgICAgICBzZXNzaW9uLnNlbmRBY3Rpb24gPSBKU09OLnN0cmluZ2lmeShwb2xsQWN0aW9uKTtcblxuICAgICAgICByZXR1cm4gXCJzdWNjZXNzXCI7ICAgICAgICBcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcInByZXBhcmVDYWxsUG9sbEFjY2VwdCBMb2c6IHt9XCIsIGUpO1xuICAgICAgICByZXR1cm4gXCJlcnJvci5leGNlcHRpb25cIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbGxlbmRlZChzZXNzaW9uIDogYW55LCBldmVudERhdGEgOiBhbnksIGxvY2FsUGFyYW1zOiBhbnkgKXtcbiAgICBsZXQgcmV0OiBzdHJpbmcgPSBcInN1Y2Nlc3NcIjtcbiAgICAvKiBlbnRlciBoZXJlIHlvdXIgY29kZSAqL1xuXG4gICAgbGV0IGxvZyA6IGFueSA9IHNlc3Npb24ubG9nO1xuICAgIGxldCBjYWxsc3RhdGVvbGQgPSBzZXNzaW9uLmNhbGxzdGF0ZTtcbiAgICBzZXNzaW9uLmNhbGxzdGF0ZSAgPVwiQ0xPU0VEXCI7XG4gICAgc2Vzc2lvbi50aW1lZW5kPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkvMTAwMCk7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHNlc3Npb24udGltZWFuc3dlciE9bnVsbCkge1xuICAgICAgICAgICAgc2Vzc2lvbi5kdXJhdGlvbj0gc2Vzc2lvbi50aW1lZW5kIC0gc2Vzc2lvbi50aW1lYW5zd2VyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2Vzc2lvbi5kdXJhdGlvbj1cIm5vdC1zdGFydGVkXCI7ICAgIFxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBzZXNzaW9uLmR1cmF0aW9uPVwiZXhjZXB0aW9uXCI7XG4gICAgfVxuXG4gICAgbG9nLmVycm9yKFwiQ2FsbF97fTpTdGF0ZV97fS0+e30rXCIsc2Vzc2lvbltcInRyYWNlLXNrZXlcIl0sY2FsbHN0YXRlb2xkLHNlc3Npb24uY2FsbHN0YXRlKTsgIFxuICAgIHNlc3Npb24ubG9naW5mbyA9IHNlc3Npb24ubG9naW5mbytzZXNzaW9uLmNhbGxzdGF0ZStcIjtkdXJhdGlvbj1cIitzZXNzaW9uLmR1cmF0aW9uK1wiO1wiOyAgIFxuXG4gICAgLy9wcmVwYXJlIHRoZSBMT0cgbGluZSAtIHNlbmQgdG8gdGhlIGxvZ19zaXBkZW1vIHByb2Nlc3MgXG4gICAgbGV0IGxvZ2xpbmUgPSB7fTtcbiAgICB0cnl7XG4gICAgICAgICAgICBsb2dsaW5lLk1TSVNETiA9IHNlc3Npb25bXCJzX25vcm1hbGl6ZWROdW1iZXJcIl07XG4gICAgICAgICAgICBsb2dsaW5lLlNlcnZpY2VTZXNzaW9uSWQgPSBzZXNzaW9uW1wiZnNtLWlkXCJdO1xuICAgICAgICAgICAgbG9nbGluZS5Nc2dUeXBlID0gXCJTSVAuSU5WSVRFXCI7XG4gICAgICAgICAgICBsb2dsaW5lLk1zZ1Nlc3Npb25JZCA9IHNlc3Npb25bXCJmc20taWRcIl07XG4gICAgICAgICAgICBsb2dsaW5lLk1zZ0lkID0gc2Vzc2lvbltcInNfaW5pdGlhbFNJUFwiXVtcIlNJUFwiXVtcIkNhbGwtSURcIl1bXCJ2YWx1ZVwiXTtcbiAgICAgICAgICAgIGxvZ2xpbmUuTXNnRGV0YWlscyA9IFwiXCI7XG4gICAgICAgICAgICBsb2dsaW5lLlNlcnZpY2VkZXRhaWxzID0gXCJcIjtcbiAgICAgICAgICAgIGxvZ2xpbmUuY2FsbEFuc3dlcmVkID0gc2Vzc2lvbi50aW1lYW5zd2VyO1xuICAgICAgICAgICAgbG9nbGluZS5jYWxsRW5kZWQgPSBzZXNzaW9uLnRpbWVlbmQ7XG4gICAgICAgICAgICBsb2dsaW5lLmNhbGxEdXJhdGlvbiA9IHNlc3Npb24uZHVyYXRpb247XG4gICAgICAgICAgICBzZXNzaW9uLmxvZ2luZm89XCJcIjtcblxuICAgICAgICAvL3RpbWVzdGFtcCBhZGRlZCBieSBHVyBiZWZvcmUgaXQgcHV0IGl0IGludG8gdGhlIHF1ZXVlIHRvIFJURVxuICAgICAgICBsb2dsaW5lLkd3RXZlbnRUaW1lID0gc2Vzc2lvbi50aW1lYW5zd2VyOyBcblxuICAgICAgICBsZXQgbm93IDogRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCBsb2dEYXRlIDogc3RyaW5nID0gZm9ybWF0RGF0ZShub3cpO1xuICAgICAgICBsZXQgbG9nVGltZSA6IHN0cmluZyA9IGZvcm1hdFRpbWUobm93KTtcbiAgICAgICAgbG9nbGluZS5Mb2dMaW5lVGltZSA9IGxvZ0RhdGUrIFwiLlwiICsgbG9nVGltZSArIFwiLlwiKyhcIjAwMFwiICsgbm93LmdldE1pbGxpc2Vjb25kcygpLnRvU3RyaW5nKCkpLnNsaWNlKC0zKTsgICAgICAgIFxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nbGluZS5NU0lTRE4gPSBcIlwiO1xuICAgICAgICBsb2dsaW5lLlNlcnZpY2VTZXNzaW9uSWQgPSBcIlwiO1xuICAgICAgICBsb2dsaW5lLk1zZ1R5cGUgPSBcIlwiO1xuICAgICAgICBsb2dsaW5lLk1zZ1Nlc3Npb25JZCA9IFwiXCI7XG4gICAgICAgIGxvZ2xpbmUuTXNnSWQgPSBcIlwiO1xuICAgICAgICBsb2dsaW5lLk1zZ0RldGFpbHMgPSBcIlwiO1xuICAgICAgICBsb2dsaW5lLlNlcnZpY2VkZXRhaWxzID0gXCJlcnJvciBhdCBDQ1JDb250aW51ZSBsb2dsaW5lXCI7XG4gICAgICAgIGxvZ2xpbmUuY2FsbEFuc3dlcmVkID0gXCJuYVwiO1xuICAgICAgICBsb2dsaW5lLmNhbGxFbmRlZCA9IFwibmFcIjtcbiAgICAgICAgbG9nbGluZS5jYWxsRHVyYXRpb24gPSBcIm5hXCI7XG4gICAgICAgIGxvZ2xpbmUuTG9nTGluZVRpbWUgPSBcIlwiO1xuICAgIH07XG4gICAgbG9nbGluZS5UcmFjZUxldmVsID0gc2Vzc2lvbltcImZzbS10cmFjZS1sZXZlbFwiXTsgICAgXG4gICAgc2Vzc2lvbi5sb2dsaW5lPWxvZ2xpbmU7ICAgIFxuICAgIHJldHVybiByZXQ7XG59XG5cblxuZnVuY3Rpb24gZ2V0ZGlzY29ubmVjdHJlYXNvbihzZXNzaW9uOmFueSxldmVudCBhbnksbG9jYWxQYXJhbXM6YW55KSB7XG4gICAgLypcbiAgICBldmVudHMtc3RhY2tcdFx0WzVdXG4gICAgMFx0Olx0c2lwLmNhbGxTdGFydC5OT05FXG4gICAgMTpcdHNpcC5jYWxsUG9sbC5TSVBTdWNjZXNzUmVzcG9uc2VQb2xsRXZlbnRcbiAgICAyXHQ6XHRzaXAuY2FsbEFuc3dlcmVkLlNpcENhbGxMZWdVYUNsaWVudFxuICAgIDNcdDpcdGxlZy5tYXhfY2FsbF9kdXJhdGlvblxuICAgIDRcdDpcdHNpcC5jYWxsU3RhcnQuRElTQ09OTkVDVEVEICAgIFxuICAgICovXG4gICAgbGV0IGxvZyA9IHNlc3Npb24ubG9nO1xuXG4gICAgdHJ5IHtcblxuICAgICAgICBzZXNzaW9uLmNhbGxzdGF0ZSAgPVwiQ0xPU0VEXCI7XG4gICAgICAgIHNlc3Npb24udGltZWVuZD0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLzEwMDApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHNlc3Npb24udGltZWFuc3dlciE9bnVsbCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb24uZHVyYXRpb249IHNlc3Npb24udGltZWVuZCAtIHNlc3Npb24udGltZWFuc3dlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5kdXJhdGlvbj1cIm5vdC1zdGFydGVkXCI7ICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBzZXNzaW9uLmR1cmF0aW9uPVwiZXhjZXB0aW9uXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy9wcmVwYXJlIHRoZSBMT0cgbGluZSAtIHNlbmQgdG8gdGhlIGxvZ19zaXBkZW1vIHByb2Nlc3MgXG4gICAgICAgIGxldCBsb2dsaW5lID0ge307XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGxvZ2xpbmVbXCJNU0lTRE5cIl0gPSBzZXNzaW9uW1wic19ub3JtYWxpemVkTnVtYmVyXCJdO1xuICAgICAgICAgICAgbG9nbGluZVtcIlNlcnZpY2VTZXNzaW9uSWRcIl0gPSBzZXNzaW9uW1wiZnNtLWlkXCJdO1xuICAgICAgICAgICAgbG9nbGluZVtcIk1zZ1R5cGVcIl0gPSBcIlNJUC5JTlZJVEVcIjtcbiAgICAgICAgICAgIGxvZ2xpbmVbXCJNc2dTZXNzaW9uSWRcIl0gPSBzZXNzaW9uW1wiZnNtLWlkXCJdO1xuICAgICAgICAgICAgbG9nbGluZVtcIk1zZ0lkXCJdID0gc2Vzc2lvbltcInNfaW5pdGlhbFNJUFwiXVtcIlNJUFwiXVtcIkNhbGwtSURcIl1bXCJ2YWx1ZVwiXTtcbiAgICAgICAgICAgIGxvZ2xpbmVbXCJNc2dEZXRhaWxzXCJdID0gXCJ0byBiZSBmaWxsZWRcIjtcbiAgICAgICAgICAgIGxvZ2xpbmVbXCJTZXJ2aWNlZGV0YWlsc1wiXSA9IFwidG8gYmUgZmlsbGVkXCI7XG4gICAgICAgICAgICBsb2dsaW5lW1wiY2FsbEFuc3dlcmVkXCJdID0gc2Vzc2lvbi50aW1lYW5zd2VyO1xuICAgICAgICAgICAgbG9nbGluZVtcImNhbGxFbmRlZFwiXSA9IHNlc3Npb24udGltZWVuZDtcbiAgICAgICAgICAgIGxvZ2xpbmVbXCJjYWxsRHVyYXRpb25cIl0gPSBzZXNzaW9uLmR1cmF0aW9uO1xuXG4gICAgICAgICAgICBsZXQgbm93IDogRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBsZXQgbG9nRGF0ZSA6IHN0cmluZyA9IGZvcm1hdERhdGUobm93KTtcbiAgICAgICAgICAgIGxldCBsb2dUaW1lIDogc3RyaW5nID0gZm9ybWF0VGltZShub3cpO1xuICAgICAgICAgICAgbG9nbGluZVtcIkxvZ0xpbmVUaW1lXCJdID0gbG9nRGF0ZSsgXCIuXCIgKyBsb2dUaW1lICsgXCIuXCIrKFwiMDAwXCIgKyBub3cuZ2V0TWlsbGlzZWNvbmRzKCkudG9TdHJpbmcoKSkuc2xpY2UoLTMpOyAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ2xpbmVbXCJNU0lTRE5cIl0gPSBcIlwiO1xuICAgICAgICAgICAgbG9nbGluZVtcIlNlcnZpY2VTZXNzaW9uSWRcIl0gPSBcIlwiO1xuICAgICAgICAgICAgbG9nbGluZVtcIk1zZ1R5cGVcIl0gPSBcIlwiO1xuICAgICAgICAgICAgbG9nbGluZVtcIk1zZ1Nlc3Npb25JZFwiXSA9IFwiXCI7XG4gICAgICAgICAgICBsb2dsaW5lW1wiTXNnSWRcIl0gPSBcIlwiO1xuICAgICAgICAgICAgbG9nbGluZVtcIk1zZ0RldGFpbHNcIl0gPSBcIlwiO1xuICAgICAgICAgICAgbG9nbGluZVtcIlNlcnZpY2VkZXRhaWxzXCJdID0gXCJleGNlcHRpb25cIiArIGU7XG4gICAgICAgICAgICBsb2dsaW5lW1wiY2FsbEFuc3dlcmVkXCJdID0gXCJuYVwiO1xuICAgICAgICAgICAgbG9nbGluZVtcImNhbGxFbmRlZFwiXSA9IFwibmFcIjtcbiAgICAgICAgICAgIGxvZ2xpbmVbXCJjYWxsRHVyYXRpb25cIl0gPSBcIm5hXCI7XG4gICAgICAgICAgICBsb2dsaW5lW1wiTG9nTGluZVRpbWVcIl0gPSBcIm5hXCI7XG4gICAgICAgIH07XG4gICAgICAgIHNlc3Npb24ubG9nbGluZT1sb2dsaW5lOyAgICAgICAgICBcblxuICAgICAgICBsZXQgZXZlbnRzPWV2ZW50W1wiZXZlbnRzLXN0YWNrXCJdLmxlbmd0aDtcbiAgICAgICAgbGV0IGluZGV4PWV2ZW50cy0xO1xuICAgICAgICBpZiAoZXZlbnRbXCJldmVudHMtc3RhY2tcIl1baW5kZXhdID09PSBcImxlZy50aW1lb3V0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBcInJlYXNvbi50aW1lb3V0XCI7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRbXCJldmVudHMtc3RhY2tcIl1baW5kZXhdID09PSBcImxlZy5tYXhfY2FsbF9kdXJhdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJyZWFzb24ubWF4X2NhbGxfZHVyYXRpb25cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcInJlYXNvbi5cIiArIGV2ZW50W1wiZXZlbnRzLXN0YWNrXCJdW2luZGV4XTsgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nLmRlYnVnKFwiZ2V0ZGlzY29ubmVjdHJlYXNvbiBMb2c6IHt9XCIsIGUpO1xuICAgICAgICByZXR1cm4gXCJyZWFzb24uZXhjZXB0aW9uXCI7XG4gICAgfVxufVxuXG5cblxuXG5mdW5jdGlvbiBzZXRQcmVjb25kaXRpb25Gb3J3YWRDYWxsYjJiKHNlc3Npb246YW55LGV2ZW50OmFueSxsb2NhbFBhcmFtczphbnkpOiBSZXN1bHRDb2RlIHtcblxuICAgIGxldCByZXQ6IFJlc3VsdENvZGUgO1xuICAgIHJldCA9IHJldCB8fCB7fTtcbiAgICByZXQucmVzdWx0Q29kZT1cInN1Y2Nlc3NcIjtcbiAgICBcbiAgICBsZXQgZXZlbnRzIDogRXZlbnRzO1xuICAgIGV2ZW50cyA9IGV2ZW50cyB8fCB7fTtcblxuICAgIFxuICAgIGV2ZW50cy5TSVBQb2xsRXZlbnQ9XCJudWxsXCI7XG4gICAgLy90eXBvcyBpbiB0aGUgYmVsb3dcbiAgICBldmVudHMuU0lQMTh4SW5mb3JtYXRvaW5hbEV2ZW50PVwibnVsbFwiO1xuICAgIGV2ZW50cy5TZHBBbnN3ZXJFdmVudD1cIm51bGxcIjtcbiAgICBldmVudHMuU0lQUmVJTlZJVEVFdmVudD1cIm51bGxcIjtcbiAgICBldmVudHMuU0RQT2ZmZXJQb2xsRXZlbnQ9XCJudWxsXCI7XG4gICAgZXZlbnRzLlNpcFJpbmdpbmdQb2xsRXZlbnQ9XCJudWxsXCI7XG4gICAgZXZlbnRzLlNpcFNkcE9mZmVyUG9sbEV2ZW50PVwibnVsbFwiO1xuICAgIGV2ZW50cy5TSVBlZ0Nsb3NlZEV2ZW50PVwibnVsbFwiO1xuICAgIFxuICAgIGV2ZW50cy5DYWxsQmVpbmdGb3J3YXJkZWRQb2xsRXZlbnQ9XCJudWxsXCI7XG4gICAgZXZlbnRzLlNJUFNkcEFuc3dlclBvbGxFdmVudD1cIm51bGxcIjtcblxuICAgIGV2ZW50cy5SaW5naW5nUG9sbEV2ZW50PVwibnVsbFwiO1xuXG5cblxuXG4gICAgZXZlbnRzLlNJUDE4eEFuc3dlckV2ZW50PVwibnVsbFwiO1xuICAgIGV2ZW50cy5TSVBSaW5naW5nUG9sbEV2ZW50PVwibnVsbFwiO1xuICAgIC8vbmVlZHMgYSBoYW5kbGVcbiAgICBldmVudHMuSW5mb1BvbGxFdmVudD1cIm51bGxcIjtcbiAgICBldmVudHMuU3VjY2Vzc1Jlc3BvbnNlUG9sbEV2ZW50PVwibnVsbFwiO1xuICAgIGV2ZW50cy5SYXdDb250ZW50UG9sbEV2ZW50PVwidGVzdC90ZXN0XCI7XG4gICAgc2Vzc2lvbi5ldmVudHMgPSBKU09OLnN0cmluZ2lmeShldmVudHMpOyAgXG5cbiAgICAvL2xldCB1bnN1YiA9IHtcIkluZm9Qb2xsRXZlbnRcIjpcIlwiLCBcIlN1Y2Nlc3NSZXNwb25zZVBvbGxFdmVudFwiOlwiXCIsIFwiU0lQUmluZ2luZ1BvbGxFdmVudFwiOlwiXCIsIFwiUmF3Q29udGVudFBvbGxFdmVudFwiOlwiXCJ9O1xuICAgIC8vc2Vzc2lvbi51bnN1YnNjcmliZUV2ZW50cz1KU09OLnN0cmluZ2lmeSh1bnN1Yik7XG4gICAgLy9sZXQgdW5zdWIgPSB7XCJTSVAxOHhBbnN3ZXJFdmVudFwiOlwiXCJ9O1xuICAgIC8vc2Vzc2lvbi51bnN1YnNjcmliZUV2ZW50cz1KU09OLnN0cmluZ2lmeSh1bnN1Yik7XG5cbiAgICAvL1NldCBoZWFkZXJzIGZvciBvdXRnb2luZyBtZXNzYWdlXG4gICAgbGV0IGhlYWRlclZhcnMgOiBIZWFkZXJWYXJzO1xuICAgIGhlYWRlclZhcnMgPSBoZWFkZXJWYXJzIHx8IHt9O1xuICAgIGhlYWRlclZhcnMuZGlzYWJsZVNlbmREZWZhdWx0UmVhc29uID0gXCJEaXNhYmxlZFwiO1xuICAgIGhlYWRlclZhcnMuZGlzYWJsZVNlbmROb0Fuc3dlclJlYXNvbiA9IFwiRGlzYWJsZWRcIjtcbiAgICAvL1NwZWNpZnkgdGhlIE1vZGUgZm9yIHRoZSBTTkYsIHNvIFNORiBhZGRzIGl0c2VsZiB0byBSZWNvcmQtUm91dGUgKG5lZWRlZCBmb3IgYjJidWEpIG9yIG5vdCAocHJveHkpXG4gICAgLy9ub3QgbmVlZGVkIGhlcmUgLSB0aGlzIGlzIGluIFNORiB0byBhcHBseSBzb21lIHJ1bGVzIGZvciBiMmJcbiAgICAvL2hlYWRlclZhcnMucHJpdmF0ZVNlcnZpY2VNb2RlID0gXCJiMmJ1YVwiO1xuICAgIFxuICAgIHNlc3Npb24uaGVhZGVycnVsZXZhcj1KU09OLnN0cmluZ2lmeShoZWFkZXJWYXJzKTtcbiAgICBzZXNzaW9uLmhlYWRlcnJ1bGVzc2VsZWN0ID0gXCJTaXBTZXJ2aWNlU3BlY2lmaWNSdWxlc1NldFwiO1xuXG5cbiAgICBcbiAgICAvKlxuICAgIC8vdGhpcyByZXF1aXJlcyBhIFN1cHBvcnRlZDogMTAwUmVsIGluIHRoZSBpbmNvbWluZyByZXF1ZXN0IGFuZCBzZW5kcyBhIDE4MyB0byBBIHdpdGggUmVxdWlyZTogMTAwUmVsIFxuICAgIGxldCBjYXBhYmlsaXRpZXMgOiBhbnlbXSA9IFtdO1xuICAgIGNhcGFiaWxpdGllcy5wdXNoKENhcGFiaWxpdGllcy5QRU0pO1xuICAgIGNhcGFiaWxpdGllcy5wdXNoKENhcGFiaWxpdGllcy5SRUwxWFgpO1xuICAgIGNhcGFiaWxpdGllcy5wdXNoKENhcGFiaWxpdGllcy5VUERBVEUpO1xuICAgIGNhcGFiaWxpdGllcy5wdXNoKENhcGFiaWxpdGllcy5GT1JLSU5HKTtcbiAgICBzZXNzaW9uLnVwc3RyZWFtQ2FwYWJpbGl0aWVzID0gSlNPTi5zdHJpbmdpZnkoY2FwYWJpbGl0aWVzKTtcbiAgICAqL1xuXG4gICAgLypcbiAgICBsZXQgY2FwYWJpbGl0aWVzID0gc2Vzc2lvbi5zX0luaXRpYWxDYXBhYmlsaXRpZXM7XG4gICAgaWYoIGNhcGFiaWxpdGllcyE9bnVsbCl7XG4gICAgICAgIGNhcGFiaWxpdGllcy5wdXNoKENhcGFiaWxpdGllcy5QRU0pO1xuICAgICAgICBjYXBhYmlsaXRpZXMucHVzaChDYXBhYmlsaXRpZXMuRk9SS0lORyk7XG4gICAgICAgIHNlc3Npb24ub3V0Q2FwYWJpbGl0aWVzID0gSlNPTi5zdHJpbmdpZnkoY2FwYWJpbGl0aWVzKTtcbiAgICB9XG4gICAgKi9cblxuICAgIC8vIHNlc3Npb24ucmluZ2luZ3RvbmVzID0gSlNPTi5zdHJpbmdpZnkocmluZ2luZ1RvbmVzKTtcblxuICAgIHJldHVybiByZXQ7XG59XG5cblxuZnVuY3Rpb24gY2hlY2tTRFBBbnN3ZXJBY3Rpb24oc2Vzc2lvbjphbnksZXZlbnQ6YW55LGxvY2FsUGFyYW1zOmFueSkgIHtcbiAgICAvL2V2ZW50RGF0YSBpcyBub3cgbGFzdCBtZXNzZ2FlXG4gICAgbGV0IGV2ZW50RGF0YSA9IGxvY2FsUGFyYW1zLm1lc3NhZ2U7XG5cbiAgICAvL2FkZCB0aGUgcG9sbCBhY3Rpb25zIChhY2NlcHQsIGZvcndhcmQsIHJlamVjdCkgdG8gdGhlIGNhbGxwb2xsIGFuc2V3ciBldmVudFxuICAgIC8vSW5mb3JtYXRpb25hbEV2ZW50IGlzIGEgaGlnaC1sZXZlbCBpbnRlcmZhY2UgdHlwaWNhbGx5IHNwZWNpYWxpemVkIGZvciBjb25jcmV0ZSBldmVudHMuIFRoZSBDYWxsVXNlciBpcyBub3QgcmVxdWlyZWQgdG8gdGFrZSBhbnkgYWN0aW9uIGZvciB0aGlzIGV2ZW50LCB0aGVzZSBhcmUgcHVyZWx5IGluZm9ybWF0aW9uYWwuXG4gICAgLy9Qb2xsRXZlbnQgaXMgYW4gZXZlbnQgb24gd2hpY2ggdGhlIENhbGxVc2VyIGlzIGV4cGVjdGVkIHRvIHRha2UgYW4gYWN0aW9uIHVwb24gcmVjZWl2aW5nIHRoZSBldmVudC4gVGhlIGFjdGlvbiBpcyB1c3VhbGx5IGJ5IGludm9raW5nIHRoZSBQb2xsRXZlbnQgbWV0aG9kcyBhY2NlcHQsIHJlamVjdCBvciBmb3J3YXJkLlxuICAgIGxldCBwb2xsQWN0aW9uIDogQ2FsbFBvbGxBY3Rpb247XG4gICAgcG9sbEFjdGlvbiA9IHBvbGxBY3Rpb24gfHwge307XG4gICAgLy9wb2xsQWN0aW9uLnR5cGUgPSBDYWxsUG9sbEFjdGlvblR5cGUuQWNjZXB0O1xuICAgIHBvbGxBY3Rpb24udHlwZSA9IENhbGxQb2xsQWN0aW9uVHlwZS5SZWplY3Q7XG4gICAgc2Vzc2lvbi5zZW5kQWN0aW9uID0gSlNPTi5zdHJpbmdpZnkocG9sbEFjdGlvbik7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuXG5mdW5jdGlvbiBtb2RpZnlkaXNwb3NpdGlvbihzZXNzaW9uOmFueSxldmVudDphbnksbG9jYWxQYXJhbXM6YW55KSB7XG4gICAgbGV0IGluaXRpYWxNc2cgPSBsb2NhbFBhcmFtcy5tZXNzYWdlO1xuICAgIGlmIChpbml0aWFsTXNnW1wiU0lQXCJdW1wiY2FwYWJpbGl0aWVzXCJdICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGluaXRpYWxNc2dbXCJTSVBcIl1bXCJjYXBhYmlsaXRpZXNcIl0uaW5kZXhPZihDYXBhYmlsaXRpZXMuRk9SS0lORykgPiAtMSkge1xuICAgICAgICAgICAgLy9pdCBpcyBwcmVzZW50LiBtZWFucyB0aGUgU0lQIGhlYWRlciBcIlJlcXVlc3QtRGlzcG9zaXRpb246IG5vLWZvcmtcIiBpcyBOT1QgcHJlc2VudC4gVGhpcyBpbnN0cnVjdHMgVEFTIHRvIG5vdCBzZW5kIDE4MyBiZWZvcmUgZm9yd2FyZGluZyB0aGUgSU5WSVRFXG4gICAgICAgICAgICBsZXQgY2FwYWJpbGl0aWVzIDogYW55W10gPSBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy90aGUgYmVsb3cgY3JlYXRlcyBleGNlcHRpb24gXG4gICAgICAgICAgICAvL2NhcGFiaWxpdGllcyA9IGluaXRpYWxNc2cuU0lQLmNhcGFiaWxpdGllcztcbiAgICAgICAgICAgIC8vY2FwYWJpbGl0aWVzLnB1c2goQ2FwYWJpbGl0aWVzLkZPUktJTkcpO1xuICAgICAgICAgICAgLy90aGlzIHdvdWxkIGJlIHJlbW92ZVxuICAgICAgICAgICAgLy9sZXQgaW5kZXg9IGluaXRpYWxNc2dbXCJTSVBcIl1bXCJjYXBhYmlsaXRpZXNcIl0uaW5kZXhPZihDYXBhYmlsaXRpZXMuRk9SS0lORyk7XG4gICAgICAgICAgICAvL2luaXRpYWxNc2dbXCJTSVBcIl1bXCJjYXBhYmlsaXRpZXNcIl0uc3BsaWNlKGluZGV4LCAxKTsgLy8gMm5kIHBhcmFtZXRlciBtZWFucyByZW1vdmUgb25lIGl0ZW0gb25seVxuICAgICAgICAgICAgc2Vzc2lvbi51cHN0cmVhbUNhcGFiaWxpdGllcyA9IEpTT04uc3RyaW5naWZ5KGNhcGFiaWxpdGllcyk7ICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluaXRpYWxNc2dbXCJTSVBcIl1bXCJSLVVSSVwiXVtcInZhbHVlXCJdID09IFwic2lwOjk3MjAwMDAxOUAxNzIuMzEuMTEuMTQyOjUwNjJcIikge1xuICAgICAgICBzZXNzaW9uLmRlc3RsaXN0ID0gW1wic2lwOjk5MDAwMDRAMTcyLjMxLjExLjE0Mjo1MDYyXCIsIFwic2lwOjk5MDAwOTlAMTcyLjMxLjExLjE0Mjo1MDYyXCJdO1xuICAgIH1cbiAgICBcblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5cbmZ1bmN0aW9uIHNldGRlc3RpbmF0aW9ubGlzdChzZXNzaW9uOmFueSxldmVudDphbnksbG9jYWxQYXJhbXM6YW55KSB7XG4gICAgbGV0IGluaXRpYWxNc2cgPSBsb2NhbFBhcmFtcy5tZXNzYWdlO1xuXG4gICAgaWYgKGluaXRpYWxNc2dbXCJTSVBcIl1bXCJSLVVSSVwiXVtcInZhbHVlXCJdID09IFwic2lwOjk3MjAwMDAxOUAxNzIuMzEuMTEuMTQyOjUwNjJcIikge1xuICAgICAgICBzZXNzaW9uLmRlc3RsaXN0ID0gW1wic2lwOjk5MDAwMTFAMTcyLjMxLjExLjE0Mjo1MDYyXCIsIFwic2lwOjk5MDAwMjJAMTcyLjMxLjExLjE0Mjo1MDY0XCIsIFwic2lwOjk5MDAwMzNAMTcyLjMxLjExLjE0Mjo1MDY1XCJdO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuXG5cbmZ1bmN0aW9uIGFkZGhlYWRlcihzZXNzaW9uIDogYW55LCBldmVudCA6IGFueSwgbG9jYWxQYXJhbXM6IGFueSApeyAgICBcbiAgICBcbiAgICBsZXQgYWRkSGVhZGVycyA9IFtdO1xuICAgIGxldCByZW1vdmVIZWFkZXJzID0gW107XG5cbiAgICAvL2FkZCBoaXN0b3J5LWluZm8gaGVhZGVyXG4gICAgbGV0IGhpOiBIZWFkZXIgPSB7fTtcbiAgICBoaS5oZWFkZXIgPSBcIkhpc3RvcnktSW5mb1wiO1xuICAgIGhpLnZhbHVlID0gXCJzaXA6KzExMDA0MzY2MDg3OTYyMDExQDE3Mi4yMC4yMDguOTk7dXNlcj1waG9uZVwiO1xuICAgIGxldCBhZGRIaXN0b3J5SW5mbyA9IFtdO1xuICAgIGFkZEhpc3RvcnlJbmZvLnB1c2goaGkpO1xuICAgIGFkZEhlYWRlcnMucHVzaChhZGRIaXN0b3J5SW5mb1swXSk7XG4gICAgLy9hZGQgMm5kIGhlYWRlclxuICAgIGxldCBuaWNlaGVhZGVyOiBIZWFkZXIgPSB7fTtcbiAgICBuaWNlaGVhZGVyLmhlYWRlciA9IFwiTXlOZXdIZWFkZXJcIjtcbiAgICBuaWNlaGVhZGVyLnZhbHVlID0gXCJ3aGF0ZXZlcnlvdWxpa2VcIjtcbiAgICBhZGRIZWFkZXJzLnB1c2gobmljZWhlYWRlcik7XG4gICAgLy9pZiBhbGwgaGVhZGVycyBhcmUgYWRkZWQgLSBhZGQgdG8gc2Vzc2lvbiBcbiAgICBzZXNzaW9uLmFkZEhlYWRlcnMgPSBKU09OLnN0cmluZ2lmeShhZGRIZWFkZXJzKTtcblxuICAgIC8vbm93IHJlbW92ZSBhIGhlYWRlclxuICAgIHJlbW92ZUhlYWRlcnMucHVzaChcIlN1YmplY3RcIik7XG4gICAgc2Vzc2lvbi5yZW1vdmVIZWFkZXJzID0gSlNPTi5zdHJpbmdpZnkocmVtb3ZlSGVhZGVycyk7XG5cbiAgICAvL1NldCBoZWFkZXJzIGZvciBvdXRnb2luZyBtZXNzYWdlXG4gICAgLy9sZXQgaGVhZGVyVmFycyA6IEhlYWRlclZhcnM7XG4gICAgLy9oZWFkZXJWYXJzID0gaGVhZGVyVmFycyB8fCB7fTtcbiAgICAvL2hlYWRlclZhcnMuZGlzYWJsZVNlbmREZWZhdWx0UmVhc29uID0gXCJEaXNhYmxlZFwiO1xuICAgIC8vaGVhZGVyVmFycy5kaXNhYmxlU2VuZE5vQW5zd2VyUmVhc29uID0gXCJEaXNhYmxlZFwiOyAgICBcbiAgICAvL3Nlc3Npb24uaGVhZGVycnVsZXZhcj1KU09OLnN0cmluZ2lmeShoZWFkZXJWYXJzKTtcbiAgICBcbiAgICAvL3NlbGVjdCBoZWFkZXIgcnVsZSBzZXQgaW4gVEFTIGZvciBwcm94eS9iMmJ1YSBzY2VuYXJpb3NcbiAgICBzZXNzaW9uLmhlYWRlcnJ1bGVzc2VsZWN0ID0gXCJTaXBTZXJ2aWNlU3BlY2lmaWNSdWxlc1NldFwiO1xuXG4gICAgLy8gc2Vzc2lvbi5yaW5naW5ndG9uZXMgPSBKU09OLnN0cmluZ2lmeShyaW5naW5nVG9uZXMpO1xuXG4gICAgLy9sZXQgZXZlbnRzIDogRXZlbnRzO1xuICAgIC8vZXZlbnRzID0gZXZlbnRzIHx8IHt9O1xuICAgIC8vZXZlbnRzLkluZm9Qb2xsRXZlbnQ9XCJudWxsXCI7XG4gICAgLy9ldmVudHMuU3VjY2Vzc1Jlc3BvbnNlUG9sbEV2ZW50PVwibnVsbFwiO1xuICAgIC8vZXZlbnRzLlNJUFJpbmdpbmdQb2xsRXZlbnQ9XCJudWxsXCI7XG4gICAgLy9ldmVudHMuUmF3Q29udGVudFBvbGxFdmVudD1cInRlc3QvdGVzdFwiO1xuICAgIC8vc2Vzc2lvbi5ldmVudHMgPSBKU09OLnN0cmluZ2lmeShldmVudHMpO1xuICAgXG5cbiAgICAvL2xldCB1bnN1YiA9IHtcIkluZm9Qb2xsRXZlbnRcIjpcIlwiLCBcIlN1Y2Nlc3NSZXNwb25zZVBvbGxFdmVudFwiOlwiXCIsIFwiU0lQUmluZ2luZ1BvbGxFdmVudFwiOlwiXCIsIFwiUmF3Q29udGVudFBvbGxFdmVudFwiOlwiXCJ9O1xuICAgIC8vc2Vzc2lvbi51bnN1YnNjcmliZUV2ZW50cz1KU09OLnN0cmluZ2lmeSh1bnN1Yik7XG4gICAgLy9sZXQgdW5zdWIgPSB7XCJTSVAxOHhBbnN3ZXJFdmVudFwiOlwiXCJ9O1xuICAgIC8vc2Vzc2lvbi51bnN1YnNjcmliZUV2ZW50cz1KU09OLnN0cmluZ2lmeSh1bnN1Yik7ICAgIFxuXG5cbiAgICAvL1NwZWNpZnkgdGhlIE1vZGUgZm9yIHRoZSBTTkYsIHNvIFNORiBhZGRzIGl0c2VsZiB0byBSZWNvcmQtUm91dGUgKG5lZWRlZCBmb3IgYjJidWEpIG9yIG5vdCAocHJveHkpXG4gICAgLy9oZWFkZXJWYXJzLnByaXZhdGVTZXJ2aWNlTW9kZSA9IHNlc3Npb24uc19Qcml2YXRlU2VydmljZU1vZGU7XG5cbiAgICAvKiAgICAgICAgXG4gICAgbGV0IGNhcGFiaWxpdGllcyA6IGFueVtdID0gW107XG4gICAgY2FwYWJpbGl0aWVzLnB1c2goQ2FwYWJpbGl0aWVzLlBFTSk7XG4gICAgY2FwYWJpbGl0aWVzLnB1c2goQ2FwYWJpbGl0aWVzLlJFTDFYWCk7XG4gICAgY2FwYWJpbGl0aWVzLnB1c2goQ2FwYWJpbGl0aWVzLlVQREFURSk7XG4gICAgY2FwYWJpbGl0aWVzLnB1c2goQ2FwYWJpbGl0aWVzLkZPUktJTkcpO1xuICAgIC8vc2Vzc2lvbi51cHN0cmVhbUNhcGFiaWxpdGllcyA9IEpTT04uc3RyaW5naWZ5KGNhcGFiaWxpdGllcyk7XG4gICAgKi9cbiAgICAvL3NldCB0aGUgYWN0aW9uIGZvciB0aGUgY2FsbCBcbiAgICAvL2xldCBwb2xsQWN0aW9uIDogQ2FsbFBvbGxBY3Rpb24gPSB7fTtcbiAgICAvL3BvbGxBY3Rpb24udHlwZSA9IGFjdGlvblR5cGU7XG4gICAgLy9zZXNzaW9uLnNlbmRBY3Rpb24gPSBKU09OLnN0cmluZ2lmeShwb2xsQWN0aW9uKTtcblxuICAgIHJldHVybiBcInN1Y2Nlc3NcIjtcbn1cbiJdfQ==