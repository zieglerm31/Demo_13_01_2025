<?xml version="1.0" encoding="UTF-8"?>
<mxGraphModel dx="2160" dy="1874" grid="1" gridSize="10" guides="1" tooltips="1" connect="1"
              fold="1"
              page="1"
              pageScale="1"
              pageWidth="826"
              pageHeight="1169">
   <root>
      <mxCell id="0"/>
      <mxCell id="1" parent="0"/>
      <start action="com.eitg.quasar.nexus.middleware.scxml.handlers.StartHandler"
             label="Start (generic)"
             initial="1"
             name=""
             traceField=""
             traceList=""
             traceTimeout=""
             traceCondition=""
             id="2">
         <mxCell style="image;html=1;image=clipart/start-button.png" parent="1" vertex="1">
            <mxGeometry x="360" y="-26" width="80" height="80" as="geometry"/>
         </mxCell>
      </start>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler"
            label="Stop.mrfcallended"
            isfinal="yes"
            id="3">
         <mxCell style="image;html=1;image=clipart/plain-stop.png" parent="1" vertex="1">
            <mxGeometry x="70" y="930" width="80" height="80" as="geometry"/>
         </mxCell>
      </stop>
      <undefined action="com.eitg.quasar.nexus.siphandlers.ScxmlConnectToMrf"
                 label="Connect to MRF earlymedia"
                 name=""
                 earlymedia="true"
                 message="spel:#session[&#34;s_SIPInvite&#34;]"
                 continue="true"
                 id="5">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;"
                 parent="1"
                 vertex="1">
            <mxGeometry x="190" y="390" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <mxCell id="6"
              value="Input Parameters&#xA;earlydialog, type boolean&#xA;action, type string, values promptandcollect, playannouncement&#xA;announcement, type string&#xA;&#xA;{&#xA;&#34;playannouncement&#34;: &#34;annoTest&#34;,&#xA;  &#34;action&#34;: &#34;promptandcollect&#34;,&#xA;  &#34;earlydialog&#34;: true&#xA;}&#xA;&#xA;session[&#34;s_SIPInvite&#34;]&#xA;&#xA;using libs: mrf, mrf....&#xA;using config: mrf_announcements&#xA;&#xA;output&#xA;session[&#34;mrf&#34;] object&#xA;return values&#xA;- error.*"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry y="45" width="290" height="215" as="geometry"/>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.validate.input"
                          library="Demo_13_01_2025:mrf"
                          function="inputvalidation"
                          id="8">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="340" y="124" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="9" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="2"
              target="8"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <undefined action="com.eitg.quasar.nexus.siphandlers.ScxmlConnectToMrf"
                 label="Connect to MRF"
                 name=""
                 earlymedia="false"
                 message="spel:#session[&#34;s_SIPInvite&#34;]"
                 continue="true"
                 id="10">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;"
                 parent="1"
                 vertex="1">
            <mxGeometry x="480" y="390" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler"
            label="Stopinputerror"
            isfinal="yes"
            id="11">
         <mxCell style="image;html=1;image=clipart/plain-stop.png" parent="1" vertex="1">
            <mxGeometry x="680" y="114" width="80" height="80" as="geometry"/>
         </mxCell>
      </stop>
      <mxCell id="12" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;"
              parent="1"
              source="8"
              target="11"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="13" value="true"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;"
              parent="1"
              source="8"
              target="86"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <mxPoint x="250" y="287" as="targetPoint"/>
            <Array as="points">
               <mxPoint x="400" y="222"/>
               <mxPoint x="250" y="222"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="14" value="false"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="8"
              target="87"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="400" y="237"/>
               <mxPoint x="540" y="237"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="15" value="scenario4"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="140" y="330" width="80" height="40" as="geometry"/>
      </mxCell>
      <mxCell id="16" value="scenario5"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="570" y="330" width="80" height="40" as="geometry"/>
      </mxCell>
      <undefined action="com.eitg.quasar.nexus.siphandlers.ScxmlSIPStartHandler"
                 label="Wait SIP Event"
                 name=""
                 message="spel:#session[&#34;s_initialSIP&#34;]"
                 id="17">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;" parent="1"
                 vertex="1">
            <mxGeometry x="-280" y="510" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <mxCell id="18" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="5"
              target="78"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
         </mxGeometry>
      </mxCell>
      <mxCell id="19" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="10"
              target="82"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="540" y="475"/>
               <mxPoint x="430" y="475"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.checkSIPresponse"
                          library="Demo_13_01_2025:mrf"
                          function="handle200OKINVITE"
                          message="spel:#initial"
                          id="20">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="340" y="610" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="21" value="sip.callPoll.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0.5;entryY=0;exitX=0.5;exitY=1;"
              parent="1"
              source="78"
              target="20"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <mxPoint x="-20" y="620" as="sourcePoint"/>
            <Array as="points">
               <mxPoint x="250" y="585"/>
               <mxPoint x="400" y="585"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler"
            label="Stop.nonsipresponseevent"
            isfinal="yes"
            id="22">
         <mxCell style="image;html=1;image=clipart/plain-stop.png" parent="1" vertex="1">
            <mxGeometry x="770" y="490" width="80" height="80" as="geometry"/>
         </mxCell>
      </stop>
      <mxCell id="23" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;"
              parent="1"
              source="78"
              target="70"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
         </mxGeometry>
      </mxCell>
      <mxCell id="24" value="could be timeout or any other"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="780" y="415" width="90" height="70" as="geometry"/>
      </mxCell>
      <mxCell id="25" value="input is not correct"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="780" y="124" width="90" height="70" as="geometry"/>
      </mxCell>
      <undefined action="com.eitg.quasar.nexus.siphandlers.ScxmlSendAction" label="SendAction"
                 name=""
                 message="spel:#initial"
                 continue="spel:true"
                 id="26">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;"
                 parent="1"
                 vertex="1">
            <mxGeometry x="340" y="720" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <mxCell id="27" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="20"
              target="26"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler"
            label="Stop.generalerror"
            isfinal="yes"
            id="28">
         <mxCell style="image;html=1;image=clipart/plain-stop.png" parent="1" vertex="1">
            <mxGeometry x="770" y="1000" width="80" height="80" as="geometry"/>
         </mxCell>
      </stop>
      <mxCell id="29" value="error.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0.5;entryY=0;"
              parent="1"
              source="20"
              target="28"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="810" y="640"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="30" value="wait for event sip.callPoll.SIPSuccessResponsePollEvent"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="-110" y="530" width="240" height="40" as="geometry"/>
      </mxCell>
      <mxCell id="31"
              value="TMP URI is defined in service_config.json&#xA;NgIn.Net.Sip.Resosip:msml@10.20.110.16;transport=udp;lrurce.RawMrf.RawMrfServer = &#xA;earlymedia must be string type"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="-300" y="395" width="470" height="65" as="geometry"/>
      </mxCell>
      <undefined action="com.eitg.quasar.nexus.siphandlers.ScxmlSIPStartHandler"
                 label="Wait SIP Event"
                 name=""
                 message=""
                 id="32">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;" parent="1"
                 vertex="1">
            <mxGeometry x="340" y="830" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <mxCell id="33" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="26"
              target="32"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.checkmediatype"
                          library="Demo_13_01_2025:mrf"
                          function="handle200OKINFO"
                          id="34">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="530" y="890" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="35" value="sip.callAnswered.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=1;entryX=0;entryY=0.5;"
              parent="1"
              source="32"
              target="34"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="430" y="920"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="37" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;entryX=1;entryY=0.5;"
              parent="1"
              source="34"
              target="32"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="38" value="error.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0.25;entryY=0;"
              parent="1"
              source="34"
              target="28"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="790" y="920"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="39" value="sip.callEnd"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.75;entryX=0.5;entryY=0;"
              parent="1"
              source="32"
              target="3"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="110" y="875"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <event-generator-handler action="io.qsrlabs.nexus.middleware.scxml.handlers.EvaluateParamsAndGenerateEvent"
                               label="MRF.action"
                               evt.promptandcollect="spel:#session[&#34;mrf&#34;][&#34;action&#34;] eq &#34;promptandcollect&#34;"
                               evt.playannouncement="spel:#session[&#34;mrf&#34;][&#34;action&#34;] eq &#34;playannouncement&#34;"
                               id="42">
         <mxCell style="image;html=1;image=clipart/check-list.png" parent="1" vertex="1">
            <mxGeometry x="340" y="1010" width="120" height="60" as="geometry"/>
         </mxCell>
      </event-generator-handler>
      <undefined action="com.eitg.quasar.nexus.siphandlers.MSMLPromptCollect"
                 label="Play prompt and collect digits"
                 name=""
                 msmltag="spel:#session[&#34;mrf&#34;][&#34;downStreamToTag&#34;]"
                 announcementId="spel:#session[&#34;mrf&#34;][&#34;announcement&#34;]"
                 container="meta.qp.mrf_announcements"
                 variable=""
                 variableType="digits"
                 variableMeta=""
                 message="spel:#initial"
                 id="43">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;"
                 parent="1"
                 vertex="1">
            <mxGeometry x="60" y="1140" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <undefined action="com.eitg.quasar.nexus.siphandlers.MSMLPlayAnnouncement"
                 label="Play announcement"
                 name=""
                 msmltag="spel:#session[&#34;mrf&#34;][&#34;downStreamToTag&#34;]"
                 announcementId="spel:#session[&#34;mrf&#34;][&#34;announcement&#34;]"
                 container="meta.qp.mrf_announcements"
                 variable=""
                 variableType="digits"
                 variableMeta=""
                 prompt=""
                 interval="100"
                 iterate="1"
                 message="spel:#initial"
                 id="44">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;"
                 parent="1"
                 vertex="1">
            <mxGeometry x="610" y="1140" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <mxCell id="45" value="playannouncement"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="42"
              target="43"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="46" value="playannouncement"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="42"
              target="96"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="430" y="1105"/>
               <mxPoint x="540" y="1105"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="47" value="sip.callEarlyAnswered.RawMediaMrfSipUac"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;entryX=0.25;entryY=0;"
              parent="1"
              source="32"
              target="42"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="48" value="sip.callAnswered.RawMediaMrfSipUac"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="32"
              target="42"
              edge="1">
         <mxGeometry x="0.3333" relative="1" as="geometry">
            <mxPoint as="offset"/>
         </mxGeometry>
      </mxCell>
      <mxCell id="53" value="sip.callStart.DISCONNECTED"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.25;entryX=0.5;entryY=0;"
              parent="1"
              source="32"
              target="3"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="54" value="sip.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;entryX=0.5;entryY=0;"
              parent="1"
              source="32"
              target="3"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="55"
              value="add sip.* to see if any event is dropped here.. as it doesnt progress anymoer into the INFO path"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="-50" y="840" width="140" height="80" as="geometry"/>
      </mxCell>
      <mxCell id="56" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;"
              parent="1"
              source="42"
              target="28"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="710" y="1040"/>
               <mxPoint x="710" y="1040"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="57" value="let the call continue "
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="170" y="730" width="100" height="40" as="geometry"/>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.checkSIPresponse"
                          library="Demo_13_01_2025:mrf"
                          function="handle200OKINFO"
                          id="58">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="340" y="1240" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="59" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="43"
              target="58"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="62"
              value="DTMF digit value is the transition: 0 is default&#xA;add a 2nd PA here"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="-120" y="1230" width="140" height="80" as="geometry"/>
      </mxCell>
      <undefined action="com.eitg.quasar.nexus.siphandlers.ReleaseLeg" label="Release leg"
                 name=""
                 reason.down.q850.cause=""
                 reason.down.q850.text=""
                 reason.down.sip.cause=""
                 reason.down.sip.text=""
                 message="spel:#initial"
                 id="63">
         <mxCell style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;"
                 parent="1"
                 vertex="1">
            <mxGeometry x="340" y="1381" width="120" height="60" as="geometry"/>
         </mxCell>
      </undefined>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler"
            label="Stop.mrflegreleased"
            isfinal="yes"
            id="67">
         <mxCell style="image;html=1;image=clipart/plain-stop.png" parent="1" vertex="1">
            <mxGeometry x="360" y="1860" width="80" height="80" as="geometry"/>
         </mxCell>
      </stop>
      <mxCell id="68" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="44"
              target="58"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="69" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="63"
              target="74"
              edge="1">
         <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
         </mxGeometry>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.checkSIPresponse"
                          library="Demo_13_01_2025:mrf"
                          function="checkDisconnectReason"
                          message="spel:#initial"
                          id="70">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="550" y="500" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="71" value="error.mrf.timeou"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.25;entryX=0;entryY=0.5;"
              parent="1"
              source="70"
              target="22"
              edge="1">
         <mxGeometry x="-0.3043" relative="1" as="geometry">
            <mxPoint as="offset"/>
         </mxGeometry>
      </mxCell>
      <mxCell id="72" value="error.mrf.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.75;entryX=0;entryY=0.5;"
              parent="1"
              source="70"
              target="22"
              edge="1">
         <mxGeometry x="-0.4783" relative="1" as="geometry">
            <mxPoint as="offset"/>
         </mxGeometry>
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler"
               label="Statistic Success"
               category="mrf"
               type="release"
               name="success"
               id="73">
         <mxCell style="image;html=1;image=clipart/statistics.png" parent="1" vertex="1">
            <mxGeometry x="220" y="1760" width="120" height="60" as="geometry"/>
         </mxCell>
      </counter>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.mrfreturn"
                          library="Demo_13_01_2025:mrf"
                          function="mrfreturn"
                          id="74">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="340" y="1590" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="75" value="success"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="74"
              target="73"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="76" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="74"
              target="67"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="77" value=""
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="73"
              target="67"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <park-and-wait action="io.qsrlabs.nexus.middleware.scxml.handlers.WaitForNextEvent"
                     label="Wait for next ingres event"
                     id="78">
         <mxCell style="image;html=1;image=clipart/next.png" parent="1" vertex="1">
            <mxGeometry x="190" y="500" width="120" height="60" as="geometry"/>
         </mxCell>
      </park-and-wait>
      <park-and-wait action="io.qsrlabs.nexus.middleware.scxml.handlers.WaitForNextEvent"
                     label="Wait for next ingres event"
                     id="82">
         <mxCell style="image;html=1;image=clipart/next.png" parent="1" vertex="1">
            <mxGeometry x="370" y="500" width="120" height="60" as="geometry"/>
         </mxCell>
      </park-and-wait>
      <mxCell id="83" value="use error.* and not error*"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="850" y="650" width="90" height="70" as="geometry"/>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.armMRFevents"
                          library="Demo_13_01_2025:mrf"
                          function="armMRFevents"
                          id="86">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="190" y="260" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.armMRFevents"
                          library="Demo_13_01_2025:mrf"
                          function="armMRFevents"
                          id="87">
         <mxCell style="image;html=1;image=clipart/script.png" parent="1" vertex="1">
            <mxGeometry x="480" y="260" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="88" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="86"
              target="5"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="89" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              parent="1"
              source="87"
              target="10"
              edge="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="90"
              value="if SIP/2.0 415 Unsupported media type is received a mediaNotification  event shall be received. &#xA;this is not in the TAS sip ear implemented now. &#xA;means no event received on the flow for now!"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              parent="1"
              vertex="1">
         <mxGeometry x="770" y="1150" width="220" height="110" as="geometry"/>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="SendINFO"
                          library="Demo_13_01_2025:mrf"
                          function="SendINFOPromptandCollect"
                          id="96">
         <mxCell style="image;html=1;image=clipart/script.png" vertex="1" parent="1">
            <mxGeometry x="480" y="1130" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="97" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              edge="1"
              parent="1"
              source="96"
              target="58">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="98" value="received.NOK"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;entryX=0.25;entryY=0;"
              edge="1"
              parent="1"
              source="58"
              target="63">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <park-and-wait action="io.qsrlabs.nexus.middleware.scxml.handlers.WaitForNextEvent"
                     label="Wait for next ingres event"
                     id="99">
         <mxCell style="image;html=1;image=clipart/next.png" vertex="1" parent="1">
            <mxGeometry x="50" y="1290" width="120" height="60" as="geometry"/>
         </mxCell>
      </park-and-wait>
      <mxCell id="100" value="received.OK"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;entryX=0.5;entryY=0;"
              edge="1"
              parent="1"
              source="58"
              target="99">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.checkSIPresponse"
                          library="Demo_13_01_2025:mrf"
                          function="handle200OKINFO"
                          id="101">
         <mxCell style="image;html=1;image=clipart/script.png" vertex="1" parent="1">
            <mxGeometry x="50" y="1411" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="102" value="sip.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              edge="1"
              parent="1"
              source="99"
              target="101">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <park-and-wait action="io.qsrlabs.nexus.middleware.scxml.handlers.WaitForNextEvent"
                     label="Wait for next ingres event"
                     id="104">
         <mxCell style="image;html=1;image=clipart/next.png" vertex="1" parent="1">
            <mxGeometry x="50" y="1550" width="120" height="60" as="geometry"/>
         </mxCell>
      </park-and-wait>
      <mxCell id="108" value="mrfdialog.closed"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0;entryY=0.5;"
              edge="1"
              parent="1">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="109" value="mrfdialog.closed"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.75;exitX=0.5;exitY=1;"
              edge="1"
              parent="1"
              source="112"
              target="63">
         <mxGeometry relative="1" as="geometry">
            <mxPoint x="120" y="1840" as="sourcePoint"/>
            <Array as="points">
               <mxPoint x="140" y="1750"/>
               <mxPoint x="140" y="1620"/>
               <mxPoint x="255" y="1620"/>
               <mxPoint x="255" y="1426"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell id="110" value="*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;entryX=0.5;entryY=0;"
              edge="1"
              parent="1"
              source="101"
              target="104">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="111" value="mrfdialog.closed"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0;entryY=0.5;"
              edge="1"
              parent="1"
              source="101"
              target="63">
         <mxGeometry relative="1" as="geometry">
            <Array as="points">
               <mxPoint x="110" y="1481"/>
               <mxPoint x="255" y="1481"/>
               <mxPoint x="255" y="1411"/>
            </Array>
         </mxGeometry>
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary#fixed"
                          label="lib.checkSIPresponse"
                          library="Demo_13_01_2025:mrf"
                          function="handle200OKINFO"
                          id="112">
         <mxCell style="image;html=1;image=clipart/script.png" vertex="1" parent="1">
            <mxGeometry x="40" y="1690" width="120" height="60" as="geometry"/>
         </mxCell>
      </typescript-library>
      <mxCell id="113" value="sip.*"
              style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
              edge="1"
              parent="1"
              source="104"
              target="112">
         <mxGeometry relative="1" as="geometry"/>
      </mxCell>
      <mxCell id="114" value="return session[&#34;mrf&#34;] object"
              style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#FFFFCC;"
              vertex="1"
              parent="1">
         <mxGeometry x="550" y="1770" width="140" height="80" as="geometry"/>
      </mxCell>
   </root>
</mxGraphModel>